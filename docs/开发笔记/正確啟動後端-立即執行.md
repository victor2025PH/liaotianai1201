# 正確啟動後端 - 立即執行

> **日期**: 2025-12-01  
> **問題**: 未使用虛擬環境的 Python

---

## 🔍 步驟 1: 查找虛擬環境

```bash
# 查找虛擬環境和 uvicorn
echo "=== 查找虛擬環境 ==="
find /home/ubuntu/liaotian -type d -name ".venv" 2>/dev/null
find /home/ubuntu/liaotian -name "uvicorn" -type f 2>/dev/null | head -3
```

---

## 🔧 步驟 2: 使用正確的 Python 啟動

找到虛擬環境後，使用虛擬環境的 Python：

```bash
cd /home/ubuntu/liaotian/deployment-package/admin-backend

# 方法1: 直接使用虛擬環境的 Python（如果找到了）
# 假設虛擬環境在 ../.venv
if [ -f "../.venv/bin/python3" ]; then
    echo "使用虛擬環境 Python 啟動..."
    nohup ../.venv/bin/python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
    sleep 5
    curl http://localhost:8000/health
fi
```

---

## 🚀 一鍵查找並啟動

```bash
cd /home/ubuntu/liaotian/deployment-package/admin-backend && \
VENV_PYTHON=$(find /home/ubuntu/liaotian -name "python3" -path "*/.venv/bin/*" 2>/dev/null | head -1) && \
if [ -n "$VENV_PYTHON" ]; then
    echo "找到虛擬環境 Python: $VENV_PYTHON"
    echo "啟動後端..."
    nohup "$VENV_PYTHON" -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
    sleep 5
    echo "檢查服務狀態:"
    curl http://localhost:8000/health
else
    echo "未找到虛擬環境"
    echo "檢查可能的虛擬環境位置:"
    find /home/ubuntu/liaotian -type d -name ".venv" -o -name "venv" 2>/dev/null
fi
```

---

**執行這個一鍵命令，告訴我結果！**
