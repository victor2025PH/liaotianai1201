# 立即执行 - 三步完成部署

> **目标**: 快速完成部署并验证 UPSERT 功能

---

## 🚀 三步完成部署

### 第一步：执行部署命令

**复制并执行以下命令**:

```bash
ssh ubuntu@165.154.233.55 "cd ~/liaotian && git pull origin master && bash deploy/从GitHub拉取并部署.sh"
```

**执行后，您应该看到**:
- ✅ 代码拉取成功
- ✅ 后端服务重启
- ✅ "部署完成！"消息

---

### 第二步：验证部署结果

**在服务器上验证服务**（可选）:

```bash
ssh ubuntu@165.154.233.55 "curl -I http://localhost:8000/health"
```

**预期结果**: HTTP 200 OK

---

### 第三步：测试 UPSERT 功能

**在前端界面测试**:

1. 打开浏览器访问:
   ```
   http://aikz.usdt2026.cc/group-ai/scripts
   ```

2. 尝试分配剧本:
   - 选择一个账号或输入账号ID（如：639277358115）
   - 分配剧本和角色
   - 点击保存

3. 验证结果:
   - ✅ 不再出现"账号不存在"错误
   - ✅ 分配成功

---

## 📊 快速检查清单

- [ ] 第一步：执行部署命令
- [ ] 看到"部署完成！"消息
- [ ] 没有行尾符错误（`$'\r': command not found`）
- [ ] 后端服务正常运行
- [ ] 第三步：前端测试分配剧本成功
- [ ] 不再出现"账号不存在"错误

---

## ❓ 遇到问题？

### 问题 1: SSH 连接失败

**解决**: 检查网络连接和 SSH 配置

### 问题 2: 行尾符错误仍然出现

**解决**: 在服务器上手动执行：
```bash
ssh ubuntu@165.154.233.55
cd ~/liaotian
sed -i 's/\r$//' deploy/从GitHub拉取并部署.sh
chmod +x deploy/从GitHub拉取并部署.sh
bash deploy/从GitHub拉取并部署.sh
```

### 问题 3: 部署失败

**解决**: 查看错误输出，检查：
- Git 仓库配置是否正确
- 后端服务是否能正常启动
- 查看日志：`tail -100 /tmp/backend.log`

---

## 💡 简化执行命令

**一键执行**（复制以下命令）:

```bash
ssh ubuntu@165.154.233.55 "cd ~/liaotian && git pull origin master && bash deploy/从GitHub拉取并部署.sh"
```

---

**开始执行第一步！** 🚀
