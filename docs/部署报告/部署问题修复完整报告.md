# éƒ¨ç½²é—®é¢˜ä¿®å¤å®Œæ•´æŠ¥å‘Š

ç”Ÿæˆæ—¶é—´: 2025-01-23

## ğŸ” å‘ç°å’Œä¿®å¤çš„æ‰€æœ‰é—®é¢˜

### é—®é¢˜ 1: pip æœªå®‰è£… âœ… å·²è§£å†³
- **é”™è¯¯**: `/usr/bin/python3: No module named pip`
- **è§£å†³**: ä½¿ç”¨ `get-pip.py --user --break-system-packages` å®‰è£…

### é—®é¢˜ 2: externally-managed-environment âœ… å·²è§£å†³
- **é”™è¯¯**: `externally-managed-environment`
- **è§£å†³**: ä½¿ç”¨ `--break-system-packages` æ ‡å¿—

### é—®é¢˜ 3: ImportError: cannot import name 'cached' âœ… å·²è§£å†³
- **é”™è¯¯**: `ImportError: cannot import name 'cached' from 'app.core.cache'`
- **è§£å†³**: åœ¨ `cache.py` ä¸­æ·»åŠ ç‹¬ç«‹çš„ `cached()` å‡½æ•°

### é—®é¢˜ 4: ModuleNotFoundError: No module named 'jose' âœ… å·²è§£å†³
- **è§£å†³**: å®‰è£…æ‰€æœ‰ requirements.txt ä¾èµ–

### é—®é¢˜ 5: ModuleNotFoundError: No module named 'pyrogram' âœ… å·²è§£å†³
- **è§£å†³**: å®‰è£… gcc å’Œæ„å»ºå·¥å…·ï¼Œç„¶åå®‰è£… pyrogram å’Œ tgcrypto

### é—®é¢˜ 6: ImportError: cannot import name 'check_permission' âœ… å·²è§£å†³
- **é”™è¯¯**: `from app.core.permissions import PermissionCode, check_permission`
- **è§£å†³**: ä¿®æ”¹ä¸º `from app.middleware.permission import check_permission`
- **ä¿®å¤æ–‡ä»¶**:
  - `admin-backend/app/api/group_ai/session_export.py`
  - `admin-backend/app/api/system/optimization.py`

### é—®é¢˜ 7: NameError: name 'Query' is not defined âœ… å·²è§£å†³
- **é”™è¯¯**: `NameError: name 'Query' is not defined`
- **è§£å†³**: åœ¨ `main.py` ä¸­æ·»åŠ  `Query` åˆ°å¯¼å…¥åˆ—è¡¨
- **ä¿®å¤**: `from fastapi import FastAPI, Request, Query`

## ğŸ“Š éƒ¨ç½²çŠ¶æ€

### æœåŠ¡å™¨ 1: æ´›æ‰çŸ¶ (165.154.255.48)
- âœ… æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- âœ… æ‰€æœ‰ä»£ç é”™è¯¯å·²ä¿®å¤
- â³ é‡æ–°å¯åŠ¨æœåŠ¡
- â³ éªŒè¯éƒ¨ç½²

### æœåŠ¡å™¨ 2: é©¬å°¼æ‹‰ (165.154.233.179)
- âœ… æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- âœ… æ‰€æœ‰ä»£ç é”™è¯¯å·²ä¿®å¤
- â³ é‡æ–°å¯åŠ¨æœåŠ¡
- â³ éªŒè¯éƒ¨ç½²

## ğŸ“ ä¿®å¤çš„æ–‡ä»¶

1. `admin-backend/app/core/cache.py` - æ·»åŠ  `cached()` å’Œ `invalidate_cache()` å‡½æ•°
2. `admin-backend/app/api/group_ai/session_export.py` - ä¿®å¤å¯¼å…¥
3. `admin-backend/app/api/system/optimization.py` - ä¿®å¤å¯¼å…¥
4. `admin-backend/app/main.py` - æ·»åŠ  `Query` å¯¼å…¥

## ğŸ¯ ä¸‹ä¸€æ­¥

1. éªŒè¯æœåŠ¡æ˜¯å¦æˆåŠŸå¯åŠ¨
2. æ£€æŸ¥ç«¯å£ç›‘å¬
3. æµ‹è¯•å¥åº·æ£€æŸ¥
4. å®Œæˆéƒ¨ç½²éªŒè¯


