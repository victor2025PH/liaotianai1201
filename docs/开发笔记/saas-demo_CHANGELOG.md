# 更新日誌

## [2024-11-13] 功能增強

### ✨ 新增功能

1. **統一 API 客戶端 (`api-client.ts`)**
   - 5 秒超時自動 fallback 到 mock 數據
   - 統一的錯誤處理和 toast 提示
   - 支持 GET、POST、PUT、DELETE 方法
   - 自動處理網絡錯誤和超時

2. **實時數據更新**
   - `useRealtimeMetrics` Hook：支持輪詢方式實時更新指標（每 5-10 秒）
   - `useSSE` Hook：支持 Server-Sent Events（為未來擴展準備）
   - Dashboard 響應時間圖表和系統狀態卡片自動刷新

3. **圖表優化**
   - 響應時間圖表添加手動刷新按鈕
   - 顯示自動更新狀態（每 10 秒）
   - 優化圖表視覺效果

### 🔧 改進

1. **API 封裝優化**
   - 所有 API 調用統一使用 `api-client.ts`
   - 自動 fallback 到 mock 數據（當後端不可用時）
   - 統一的錯誤提示和成功提示

2. **用戶體驗**
   - 當使用 mock 數據時，顯示友好的 toast 提示
   - 所有 API 錯誤都有清晰的錯誤信息
   - 保存操作有成功/失敗提示

### 📝 技術細節

- **超時設置**: 5 秒（可在 `api-client.ts` 中調整 `API_TIMEOUT`）
- **輪詢間隔**: 
  - 響應時間圖表：10 秒
  - 系統狀態：10 秒
  - 系統監控頁面：30 秒
- **Mock 數據**: 當後端不可用時自動切換，無需手動配置

### 🐛 修復

- 修復 API 調用中的類型錯誤
- 優化錯誤處理邏輯
- 改進 toast 提示的顯示時機

