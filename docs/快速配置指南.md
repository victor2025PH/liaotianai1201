# âš¡ å¿«é€Ÿé…ç½®æŒ‡å— - Nginx å’Œ Systemd

## ğŸš€ ä¸€é”®é…ç½®ï¼ˆæœ€ç®€å•ï¼‰

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd ~/liaotian
git pull origin main
sudo bash scripts/setup_nginx_and_systemd.sh
```

å®Œæˆï¼âœ…

---

## ğŸ“‹ é…ç½®å†…å®¹

### 1. Nginx åå‘ä»£ç†
- âœ… ç»Ÿä¸€è®¿é—®å…¥å£ï¼ˆç«¯å£ 80ï¼‰
- âœ… å‰ç«¯ï¼š`http://ä½ çš„IP/`
- âœ… åç«¯ APIï¼š`http://ä½ çš„IP/api`
- âœ… API æ–‡æ¡£ï¼š`http://ä½ çš„IP/docs`

### 2. Systemd å¼€æœºè‡ªå¯åŠ¨
- âœ… å‰ç«¯æœåŠ¡è‡ªåŠ¨å¯åŠ¨
- âœ… åç«¯æœåŠ¡è‡ªåŠ¨å¯åŠ¨
- âœ… æœåŠ¡å´©æºƒè‡ªåŠ¨é‡å¯
- âœ… æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨å¯åŠ¨

---

## ğŸ” éªŒè¯é…ç½®

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status liaotian-frontend
sudo systemctl status liaotian-backend

# æ£€æŸ¥ç«¯å£
ss -tlnp | grep :80
ss -tlnp | grep :3000
ss -tlnp | grep :8000

# æµ‹è¯•è®¿é—®
curl http://localhost/health
curl http://localhost/api/health
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status liaotian-frontend
sudo systemctl status liaotian-backend

# é‡å¯æœåŠ¡
sudo systemctl restart liaotian-frontend
sudo systemctl restart liaotian-backend

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u liaotian-frontend -f
sudo journalctl -u liaotian-backend -f
```

### Nginx ç®¡ç†

```bash
# é‡è½½é…ç½®
sudo systemctl reload nginx

# æŸ¥çœ‹æ—¥å¿—
sudo tail -f /var/log/nginx/liaotian-access.log
```

---

## ğŸ”¥ é…ç½®é˜²ç«å¢™

```bash
# å…è®¸ HTTP è®¿é—®
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp  # å¦‚æœé…ç½®äº† HTTPS
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´é…ç½®è¯´æ˜è¯·æŸ¥çœ‹ï¼š
- [Nginxå’ŒSystemdé…ç½®å®Œæ•´æŒ‡å—](./Nginxå’ŒSystemdé…ç½®å®Œæ•´æŒ‡å—.md)

---

**æœ€åæ›´æ–°**: 2025-12-07
