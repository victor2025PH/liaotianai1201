# 401 错误 - 快速修复

## 问题

所有API请求返回 **401 Unauthorized**："无法验证身份"

## 原因

浏览器 `localStorage` 中没有有效的 JWT token。

## 快速解决方案

### 方法1：在浏览器控制台登录（最快）

1. **打开浏览器控制台** (按 `F12`)
2. **执行以下代码**:

```javascript
// 登录获取token
fetch('http://aikz.usdt2026.cc/api/v1/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
  },
  body: new URLSearchParams({
    username: 'admin@example.com',
    password: 'changeme123'
  })
})
.then(res => res.json())
.then(data => {
  localStorage.setItem('access_token', data.access_token)
  console.log('✅ Token已保存！请刷新页面')
  location.reload()
})
.catch(err => {
  console.error('❌ 登录失败:', err)
  alert('登录失败，请检查后端服务是否正常运行')
})
```

3. **等待登录成功，页面会自动刷新**

### 方法2：访问登录页面

直接访问登录页面并登录：
```
http://aikz.usdt2026.cc/login
```

使用默认管理员账号：
- 邮箱: `admin@example.com`
- 密码: `changeme123`

## 验证

登录后，在控制台检查token：

```javascript
console.log('Token:', localStorage.getItem('access_token'))
```

应该看到类似：
```
Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## 如果仍然失败

### 检查后端用户

确保管理员用户存在：

```bash
cd ~/liaotian/admin-backend
source .venv/bin/activate
python3 << 'EOF'
from app.db import get_db
from app.crud.user import get_user_by_email

db = next(get_db())
user = get_user_by_email(db, 'admin@example.com')
if user:
    print(f'✓ 用户存在: {user.email}, 激活: {user.is_active}')
else:
    print('✗ 用户不存在')
EOF
```

---

**快速修复：在浏览器控制台执行方法1的代码即可！**
