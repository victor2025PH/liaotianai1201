# ä¿®å¤æˆåŠŸ - æœ€ç»ˆæ€»ç»“

## ğŸ‰ ä¿®å¤æˆåŠŸï¼

æœåŠ¡å·²ç»æˆåŠŸå¯åŠ¨ï¼Œé¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼

## ä¿®å¤è¿‡ç¨‹å›é¡¾

### é—®é¢˜1ï¼šæ„å»ºé”™è¯¯
- **é—®é¢˜**ï¼š`page.tsx:2023:19` è¯­æ³•é”™è¯¯
- **è§£å†³**ï¼šåˆ é™¤æœåŠ¡å™¨ä¸Šçš„æ—§æ–‡ä»¶ï¼Œä¸Šä¼ ä¿®å¤åçš„æ–‡ä»¶ï¼Œé‡æ–°æ„å»º

### é—®é¢˜2ï¼šè·¯ç”±404
- **é—®é¢˜**ï¼š`/group-ai/accounts` è·¯ç”±æœªè¢«æ„å»º
- **è§£å†³**ï¼šæ¸…ç†æ„å»ºç¼“å­˜ï¼Œé‡æ–°æ„å»ºï¼Œç¡®è®¤è·¯ç”±å·²ç”Ÿæˆ

### é—®é¢˜3ï¼š502 Bad Gateway
- **é—®é¢˜**ï¼šNext.jsé…ç½®ä¸º `output: "standalone"`ï¼Œä½†æœåŠ¡ä½¿ç”¨ `npm start`
- **è§£å†³**ï¼šä¿®æ”¹æœåŠ¡é…ç½®ï¼Œä½¿ç”¨ `node .next/standalone/liaotian/saas-demo/server.js`

## æœ€ç»ˆæœåŠ¡é…ç½®

```ini
[Unit]
Description=Liaotian Frontend
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/liaotian/saas-demo
Environment=PORT=3000
Environment="NVM_DIR=$HOME/.nvm"
Environment="PATH=$HOME/.nvm/versions/node/v20.19.6/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
ExecStart=/home/ubuntu/.nvm/versions/node/v20.19.6/bin/node /home/ubuntu/liaotian/saas-demo/.next/standalone/liaotian/saas-demo/server.js
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

## éªŒè¯ç»“æœ

âœ… **æœåŠ¡çŠ¶æ€**ï¼š`active (running)`
âœ… **ç«¯å£ç›‘å¬**ï¼šç«¯å£3000æ­£åœ¨ç›‘å¬
âœ… **é¡µé¢è®¿é—®**ï¼š`http://aikz.usdt2026.cc/group-ai/accounts` å¯ä»¥æ­£å¸¸è®¿é—®
âœ… **é™æ€èµ„æº**ï¼šå¤§éƒ¨åˆ†é™æ€èµ„æºåŠ è½½æˆåŠŸï¼ˆ200çŠ¶æ€ç ï¼‰

## æ³¨æ„äº‹é¡¹

1. **ChunkåŠ è½½é”™è¯¯**ï¼šæœ‰ä¸€äº›chunkæ–‡ä»¶è¿”å›404ï¼Œè¿™å¯èƒ½æ˜¯å¼€å‘æ¨¡å¼çš„é—®é¢˜ï¼Œä¸å½±å“ä¸»è¦åŠŸèƒ½
2. **å­—ä½“é¢„åŠ è½½è­¦å‘Š**ï¼šè¿™æ˜¯Next.jsçš„è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½
3. **æœåŠ¡è‡ªåŠ¨é‡å¯**ï¼šé…ç½®äº† `Restart=always`ï¼ŒæœåŠ¡ä¼šè‡ªåŠ¨é‡å¯

## ä¸‹ä¸€æ­¥

ç°åœ¨å¯ä»¥ï¼š
1. âœ… è®¿é—®è´¦å·ç®¡ç†é¡µé¢
2. âœ… æŸ¥çœ‹æ‰€æœ‰è´¦å·ï¼ˆåŒ…æ‹¬WorkerèŠ‚ç‚¹è´¦å·ï¼‰
3. âœ… åˆ†é…å‰§æœ¬å’Œè§’è‰²
4. âœ… ä½¿ç”¨æ‰€æœ‰è´¦å·ç®¡ç†åŠŸèƒ½

## ç›¸å…³æ–‡ä»¶

- æœåŠ¡é…ç½®ï¼š`/etc/systemd/system/liaotian-frontend.service`
- æºæ–‡ä»¶ï¼š`/home/ubuntu/liaotian/saas-demo/src/app/group-ai/accounts/page.tsx`
- æ„å»ºè¾“å‡ºï¼š`/home/ubuntu/liaotian/saas-demo/.next/server/app/group-ai/accounts/page.js`
- Standalone serverï¼š`/home/ubuntu/liaotian/saas-demo/.next/standalone/liaotian/saas-demo/server.js`

## ç»éªŒæ€»ç»“

1. **Next.js standaloneæ¨¡å¼**ï¼š
   - å¿…é¡»ä½¿ç”¨ `node .next/standalone/.../server.js` å¯åŠ¨
   - ä¸èƒ½ä½¿ç”¨ `npm start` æˆ– `next start`
   - systemdé…ç½®ä¸­éœ€è¦åŒ…å«å®Œæ•´çš„nodeè·¯å¾„

2. **è·¯ç”±æ„å»º**ï¼š
   - å¦‚æœè·¯ç”±æœªç”Ÿæˆï¼Œæ¸…ç†ç¼“å­˜åé‡æ–°æ„å»º
   - æ£€æŸ¥æ„å»ºè¾“å‡ºä¸­çš„è·¯ç”±åˆ—è¡¨

3. **æœåŠ¡é…ç½®**ï¼š
   - `ExecStart` å¿…é¡»åŒ…å«å®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
   - ç¡®ä¿ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®
   - ä½¿ç”¨ `systemctl daemon-reload` é‡æ–°åŠ è½½é…ç½®

ä¿®å¤å®Œæˆï¼ğŸ‰

