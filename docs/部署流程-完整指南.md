# Git æ¨é€å’ŒæœåŠ¡å™¨æ‹‰å– - å®Œæ•´æµç¨‹æŒ‡å—

## ğŸ“‹ é—®é¢˜åˆ†æ

### ä¸ºä»€ä¹ˆæ–‡ä»¶æ‰¾ä¸åˆ°ï¼Ÿ

ä»æ¨é€åˆ°GitHubå†åˆ°æœåŠ¡å™¨æ‹‰å–æ‰§è¡Œï¼Œå¯èƒ½å‡ºç°é—®é¢˜çš„ç¯èŠ‚ï¼š

1. **æœ¬åœ°æ–‡ä»¶æœªè¢«Gitè·Ÿè¸ª**
   - æ–‡ä»¶è¢«`.gitignore`å¿½ç•¥
   - æ–‡ä»¶æœªæ‰§è¡Œ`git add`
   
2. **æäº¤å¤±è´¥**
   - æ²¡æœ‰æ‰§è¡Œ`git commit`
   - æäº¤ä¿¡æ¯ä¸ºç©º
   
3. **æ¨é€å¤±è´¥**
   - ç½‘ç»œé—®é¢˜
   - åˆ†æ”¯ä¸åŒ¹é…
   - æƒé™é—®é¢˜
   
4. **æœåŠ¡å™¨æ‹‰å–å¤±è´¥**
   - æœåŠ¡å™¨åˆ†æ”¯ä¸æœ¬åœ°ä¸ä¸€è‡´
   - æœåŠ¡å™¨æœ‰æœ¬åœ°ä¿®æ”¹å†²çª
   - æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®
   
5. **æ–‡ä»¶æƒé™é—®é¢˜**
   - è„šæœ¬æ–‡ä»¶æ²¡æœ‰æ‰§è¡Œæƒé™

---

## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

#### æœ¬åœ°æ¨é€è„šæœ¬

**Windows (PowerShell):**
```powershell
# æ¨é€å•ä¸ªæ–‡ä»¶
.\scripts\complete_push_workflow.ps1 -FilePath "deploy/fix_and_deploy_frontend_complete.sh" -CommitMessage "Add deployment script"

# éªŒè¯æ–‡ä»¶çŠ¶æ€
.\scripts\verify_git_push.ps1 -FilePath "deploy/fix_and_deploy_frontend_complete.sh"
```

**Linux/Mac (Bash):**
```bash
# æ¨é€å•ä¸ªæ–‡ä»¶
./scripts/complete_push_workflow.sh deploy/fix_and_deploy_frontend_complete.sh "Add deployment script"
```

#### æœåŠ¡å™¨æ‹‰å–è„šæœ¬

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd ~/liaotian
bash scripts/server_pull_verify.sh deploy/fix_and_deploy_frontend_complete.sh
```

---

### æ–¹æ¡ˆ 2: æ‰‹åŠ¨æ­¥éª¤ï¼ˆé€æ­¥éªŒè¯ï¼‰

#### æ­¥éª¤ 1: æœ¬åœ°éªŒè¯å’Œæ¨é€

```powershell
# 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Test-Path deploy/fix_and_deploy_frontend_complete.sh

# 2. æ£€æŸ¥æ˜¯å¦è¢«.gitignoreå¿½ç•¥
git check-ignore -v deploy/fix_and_deploy_frontend_complete.sh

# 3. å¼ºåˆ¶æ·»åŠ åˆ°Gitï¼ˆå³ä½¿è¢«å¿½ç•¥ï¼‰
git add -f deploy/fix_and_deploy_frontend_complete.sh

# 4. æ£€æŸ¥çŠ¶æ€
git status deploy/fix_and_deploy_frontend_complete.sh

# 5. æäº¤
git commit -m "Add fix_and_deploy_frontend_complete.sh"

# 6. æ¨é€åˆ°GitHub
git push origin main

# 7. éªŒè¯è¿œç¨‹æ–‡ä»¶å­˜åœ¨
git ls-tree -r origin/main --name-only | Select-String "fix_and_deploy"
```

#### æ­¥éª¤ 2: æœåŠ¡å™¨æ‹‰å–å’ŒéªŒè¯

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/liaotian

# 2. æ£€æŸ¥å½“å‰åˆ†æ”¯
git branch
git status

# 3. å¦‚æœæœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œå…ˆä¿å­˜
git stash

# 4. æ‹‰å–æœ€æ–°ä»£ç 
git fetch origin main
git pull origin main

# 5. éªŒè¯æ–‡ä»¶å­˜åœ¨
ls -la deploy/fix_and_deploy_frontend_complete.sh

# 6. æ£€æŸ¥æ–‡ä»¶åœ¨Gitä¸­
git ls-files deploy/fix_and_deploy_frontend_complete.sh

# 7. æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆå¦‚æœéœ€è¦ï¼‰
chmod +x deploy/fix_and_deploy_frontend_complete.sh

# 8. æ‰§è¡Œè„šæœ¬
bash deploy/fix_and_deploy_frontend_complete.sh
```

---

### æ–¹æ¡ˆ 3: ä¸€é”®æ¨é€å’Œéƒ¨ç½²ï¼ˆç»„åˆè„šæœ¬ï¼‰

#### æœ¬åœ°æ‰§è¡Œï¼ˆæ¨é€æ‰€æœ‰æ›´æ”¹ï¼‰

```powershell
# PowerShellè„šæœ¬: push_all_changes.ps1
$files = @(
    "deploy/fix_and_deploy_frontend_complete.sh",
    "saas-demo/src/components/ui/slider.tsx",
    "saas-demo/package.json"
)

foreach ($file in $files) {
    Write-Host "æ¨é€æ–‡ä»¶: $file" -ForegroundColor Yellow
    .\scripts\complete_push_workflow.ps1 -FilePath $file
}
```

#### æœåŠ¡å™¨æ‰§è¡Œï¼ˆæ‹‰å–å¹¶éƒ¨ç½²ï¼‰

```bash
#!/bin/bash
# æœåŠ¡å™¨ä¸€é”®æ‹‰å–å’Œéƒ¨ç½²è„šæœ¬

cd ~/liaotian

# 1. æ‹‰å–æœ€æ–°ä»£ç 
echo "æ‹‰å–æœ€æ–°ä»£ç ..."
git fetch origin main
git pull origin main

# 2. éªŒè¯å…³é”®æ–‡ä»¶
FILES=(
    "deploy/fix_and_deploy_frontend_complete.sh"
    "saas-demo/src/components/ui/slider.tsx"
    "saas-demo/package.json"
)

for file in "${FILES[@]}"; do
    if [[ ! -f "$file" ]]; then
        echo "é”™è¯¯: æ–‡ä»¶ä¸å­˜åœ¨ $file"
        exit 1
    fi
    echo "âœ“ $file"
done

# 3. æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy/fix_and_deploy_frontend_complete.sh

# 4. æ‰§è¡Œéƒ¨ç½²
bash deploy/fix_and_deploy_frontend_complete.sh
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ–‡ä»¶è¢«.gitignoreå¿½ç•¥

**ç—‡çŠ¶:**
```
git add deploy/xxx.sh
# æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œæ–‡ä»¶æœªè¢«æ·»åŠ 
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
# ä½¿ç”¨ -f å¼ºåˆ¶æ·»åŠ 
git add -f deploy/xxx.sh

# æˆ–è€…ä¿®æ”¹.gitignoreï¼Œæ·»åŠ ä¾‹å¤–
# åœ¨.gitignoreä¸­æ·»åŠ :
!deploy/fix_and_deploy_frontend_complete.sh
```

### é—®é¢˜ 2: æ¨é€åæœåŠ¡å™¨ä»æ‰¾ä¸åˆ°æ–‡ä»¶

**ç—‡çŠ¶:**
```
æœåŠ¡å™¨ä¸Š: git pull origin main
# Already up to date
# ä½†æ–‡ä»¶ä¸å­˜åœ¨
```

**å¯èƒ½åŸå› å’Œè§£å†³:**
1. **åˆ†æ”¯ä¸åŒ¹é…**
   ```bash
   # æ£€æŸ¥åˆ†æ”¯
   git branch -a
   # åˆ‡æ¢åˆ°æ­£ç¡®åˆ†æ”¯
   git checkout main
   git pull origin main
   ```

2. **æœåŠ¡å™¨æœ‰æœ¬åœ°ä¿®æ”¹**
   ```bash
   # å¼ºåˆ¶é‡ç½®åˆ°è¿œç¨‹çŠ¶æ€
   git fetch origin main
   git reset --hard origin/main
   ```

3. **æ–‡ä»¶åœ¨ä¸åŒåˆ†æ”¯**
   ```bash
   # ä»è¿œç¨‹åˆ†æ”¯æ£€å‡ºç‰¹å®šæ–‡ä»¶
   git checkout origin/main -- deploy/fix_and_deploy_frontend_complete.sh
   ```

### é—®é¢˜ 3: è„šæœ¬æ²¡æœ‰æ‰§è¡Œæƒé™

**ç—‡çŠ¶:**
```
bash deploy/xxx.sh
# Permission denied
```

**è§£å†³æ–¹æ¡ˆ:**
```bash
chmod +x deploy/xxx.sh
bash deploy/xxx.sh
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. æ–‡ä»¶å‘½åè§„èŒƒ

- âœ… **ä½¿ç”¨è‹±æ–‡åç§°**: `fix_and_deploy_frontend.sh`
- âŒ **é¿å…ä¸­æ–‡**: `ä¿®å¤å¹¶éƒ¨ç½²å‰ç«¯.sh`
- âœ… **ä½¿ç”¨ä¸‹åˆ’çº¿**: `deploy_frontend.sh`
- âŒ **é¿å…ç©ºæ ¼**: `deploy frontend.sh`

### 2. æ¨é€å‰æ£€æŸ¥æ¸…å•

- [ ] æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®
- [ ] æ–‡ä»¶æœªè¢«.gitignoreå¿½ç•¥
- [ ] æ–‡ä»¶å·²æ·»åŠ åˆ°Git (`git add`)
- [ ] æ–‡ä»¶å·²æäº¤ (`git commit`)
- [ ] æ›´æ”¹å·²æ¨é€ (`git push`)
- [ ] è¿œç¨‹ä»“åº“éªŒè¯æ–‡ä»¶å­˜åœ¨

### 3. æœåŠ¡å™¨æ‹‰å–å‰æ£€æŸ¥æ¸…å•

- [ ] åœ¨æ­£ç¡®çš„é¡¹ç›®ç›®å½•
- [ ] åœ¨æ­£ç¡®çš„åˆ†æ”¯
- [ ] å·¥ä½œåŒºå¹²å‡€æˆ–å·²ä¿å­˜æ›´æ”¹
- [ ] æ‰§è¡Œ `git pull` æˆåŠŸ
- [ ] éªŒè¯æ–‡ä»¶å­˜åœ¨
- [ ] æ£€æŸ¥æ–‡ä»¶æƒé™

### 4. ä½¿ç”¨éªŒè¯è„šæœ¬

æ¯æ¬¡æ¨é€åæ‰§è¡ŒéªŒè¯:
```powershell
.\scripts\verify_git_push.ps1 -FilePath "deploy/fix_and_deploy_frontend_complete.sh"
```

æœåŠ¡å™¨æ‹‰å–åæ‰§è¡ŒéªŒè¯:
```bash
bash scripts/server_pull_verify.sh deploy/fix_and_deploy_frontend_complete.sh
```

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### æ¨é€æ–‡ä»¶åˆ°GitHubï¼ˆä¸€è¡Œå‘½ä»¤ï¼‰

**PowerShell:**
```powershell
git add -f deploy/fix_and_deploy_frontend_complete.sh && git commit -m "Add script" && git push origin main
```

**Bash:**
```bash
git add -f deploy/fix_and_deploy_frontend_complete.sh && git commit -m "Add script" && git push origin main
```

### æœåŠ¡å™¨æ‹‰å–å¹¶æ‰§è¡Œï¼ˆä¸€è¡Œå‘½ä»¤ï¼‰

```bash
cd ~/liaotian && git pull origin main && chmod +x deploy/fix_and_deploy_frontend_complete.sh && bash deploy/fix_and_deploy_frontend_complete.sh
```

---

## ğŸ“š ç›¸å…³è„šæœ¬

- `scripts/verify_git_push.ps1` - éªŒè¯æ–‡ä»¶æ¨é€çŠ¶æ€
- `scripts/complete_push_workflow.ps1` - å®Œæ•´æ¨é€å·¥ä½œæµ
- `scripts/server_pull_verify.sh` - æœåŠ¡å™¨æ‹‰å–éªŒè¯

---

**æœ€åæ›´æ–°**: 2025-12-07
