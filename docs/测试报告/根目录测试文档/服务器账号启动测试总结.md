# 服务器账号启动测试总结

## 测试准备

### 已完成
1. ✅ 修改了 `start_account` API 支持服务器启动
2. ✅ 创建了测试脚本
3. ✅ 创建了浏览器测试脚本

### 当前问题
- API认证问题（可能是后端服务需要重启或Token格式问题）
- 建议使用浏览器自动化测试（已有登录状态）

## 测试方案

### 方案1：浏览器控制台测试（推荐）

**步骤**：
1. 在浏览器中打开：http://localhost:3000/group-ai/accounts
2. 按 F12 打开开发者工具
3. 切换到 Console 标签
4. 复制并运行 `浏览器测试服务器账号启动.js` 中的代码

**优点**：
- 使用浏览器已有的登录状态
- 不需要处理API认证问题
- 可以直接看到测试结果

### 方案2：PowerShell脚本测试

**前提**：需要解决API认证问题

**步骤**：
```powershell
pwsh -File "测试服务器账号启动.ps1"
```

## 测试流程

### 1. 查找已分配到服务器的账号
- 获取账号列表
- 筛选有 `server_id` 的账号
- 选择第一个进行测试

### 2. 测试启动账号
- 发送启动请求到 `/api/v1/group-ai/accounts/{account_id}/start`
- 检查返回结果
- 如果 `server_id` 存在，应该在服务器上启动

### 3. 验证账号状态
- 等待几秒让账号启动
- 检查账号状态
- 验证是否变为 `online`

## 预期结果

### 成功情况
- 启动请求返回成功
- 返回消息包含服务器ID
- 账号状态变为 `online`

### 失败情况
- 启动请求返回错误
- 账号状态为 `error`
- 可能原因：
  - Telegram连接失败
  - Session文件无效
  - 服务器启动命令执行失败

## 相关文件

- `测试服务器账号启动.ps1` - PowerShell测试脚本
- `浏览器测试服务器账号启动.js` - 浏览器测试脚本
- `admin-backend/app/api/group_ai/accounts.py` - 修改的API文件

## 下一步

1. 使用浏览器控制台测试脚本进行测试
2. 验证服务器启动功能是否正常工作
3. 如果成功，继续测试服务器上的账号建群和聊天功能

