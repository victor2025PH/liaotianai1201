# 账号测试和验证方案

## 问题分析

### 当前状态
- ✅ 找到8个真实的session文件在 `sessions/` 目录
- ❌ API认证存在问题（401 Unauthorized）
- ✅ 浏览器界面可以正常使用

### Session文件列表
1. 639277333688.session (28 KB)
2. 639277356155.session (28 KB)
3. 639277356598.session (28 KB)
4. 639457597211.session (28 KB)
5. 639641837416.session (28 KB)
6. 639641842001.session (28 KB)
7. 639652840998.session (28 KB)
8. 639679410504.session (28 KB)

## 测试方案

### 方案1：通过浏览器界面测试（推荐）
1. 在浏览器中打开账号管理页面
2. 点击"扫描Session"按钮，扫描所有session文件
3. 批量选择session文件并创建账号
4. 逐个测试启动账号
5. 记录可用/不可用账号

### 方案2：修复API认证后使用脚本
1. 检查JWT token验证逻辑
2. 修复认证问题
3. 使用PowerShell脚本批量测试

## 实施步骤

### 步骤1：扫描Session文件
- 在浏览器中点击"掃描 Session"按钮
- 确认所有8个session文件都被扫描到

### 步骤2：批量创建账号
- 选择所有可用的session文件
- 批量创建账号（会自动分配到服务器）

### 步骤3：测试启动账号
- 逐个尝试启动账号
- 记录启动结果和错误信息

### 步骤4：分类账号
- **可用账号**：能够成功启动的账号
- **不可用账号**：启动失败的账号，记录失败原因

### 步骤5：替换和通知
- 对于可用的账号，更新数据库中的账号信息
- 对于不可用的账号，生成通知文件

## 失败原因分类

可能的失败原因：
1. **Session文件无效**：文件损坏或格式错误
2. **Telegram连接失败**：需要重新验证或session过期
3. **权限问题**：账号权限不足
4. **服务器问题**：分配的服务器不可用
5. **剧本加载失败**：剧本不存在或格式错误（已修复）

## 下一步

将通过浏览器界面进行测试，因为：
1. 浏览器界面已经登录成功
2. 可以正常使用所有功能
3. 可以直观地看到测试结果

