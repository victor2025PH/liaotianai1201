# 修正的測試命令

> **問題**: 之前的測試命令導致 JSON 解析錯誤  
> **解決**: 分開處理 HTTP 狀態碼和響應體

---

## 修正後的測試命令

### 方法 1: 分開獲取狀態碼和響應（推薦）

```bash
# 獲取 Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))")

# 測試 - 保存響應到文件
curl -s -o /tmp/status_response.json -w "HTTP狀態碼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status"

# 顯示響應內容
echo ""
echo "響應內容:"
python3 -m json.tool /tmp/status_response.json
```

### 方法 2: 只顯示 HTTP 狀態碼（簡單）

```bash
# 獲取 Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))")

# 測試 - 只顯示狀態碼和響應
echo "HTTP 狀態碼:"
curl -s -o /dev/null -w "%{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status"

echo ""
echo "響應內容:"
curl -s \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" | \
  python3 -m json.tool
```

### 方法 3: 一行命令（最簡單）

```bash
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))") && \
echo "HTTP狀態碼:" && \
curl -s -o /dev/null -w "%{http_code}\n" -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" && \
echo "響應:" && \
curl -s -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" | \
  python3 -m json.tool
```

---

## 快速測試（推薦）

執行以下命令：

```bash
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))") && \
echo "=== 測試賬號狀態端點 ===" && \
HTTP_CODE=$(curl -s -o /tmp/status.json -w "%{http_code}" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status") && \
echo "HTTP狀態碼: $HTTP_CODE" && \
echo "響應內容:" && \
python3 -m json.tool /tmp/status.json
```

---

**執行修正後的測試命令，告訴我結果！**
