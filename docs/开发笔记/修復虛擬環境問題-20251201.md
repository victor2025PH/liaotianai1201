# 修復虛擬環境問題

> **日期**: 2025-12-01  
> **錯誤**: `/usr/bin/python3: No module named uvicorn`  
> **原因**: 未使用虛擬環境的 Python

---

## 🔍 問題診斷

錯誤信息顯示使用的是系統 Python (`/usr/bin/python3`)，而不是虛擬環境的 Python。

---

## 🔧 解決方案

### 步驟 1: 找到正確的虛擬環境

```bash
# 查找虛擬環境
find /home/ubuntu/liaotian -type d -name ".venv" 2>/dev/null
find /home/ubuntu -type d -name "venv" -o -name ".venv" 2>/dev/null | head -5

# 或查找 uvicorn 在哪裡
find /home/ubuntu -name "uvicorn" -type f 2>/dev/null | head -3
```

### 步驟 2: 使用虛擬環境的 Python 啟動

```bash
cd /home/ubuntu/liaotian/deployment-package/admin-backend

# 找到虛擬環境的 Python
VENV_PYTHON=$(find .. -name "python3" -path "*/.venv/bin/*" 2>/dev/null | head -1)

if [ -n "$VENV_PYTHON" ]; then
    echo "找到虛擬環境 Python: $VENV_PYTHON"
    nohup "$VENV_PYTHON" -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
    sleep 5
    curl http://localhost:8000/health
else
    echo "未找到虛擬環境，需要安裝依賴"
fi
```

---

**先執行步驟 1 找到虛擬環境，告訴我結果！**
