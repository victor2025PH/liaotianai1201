# 遠端賬號管理完整實現方案

> **日期**: 2025-12-01  
> **需求**: 後台管理遠端服務器和其他電腦上的 Telegram 賬號

---

## 🎯 核心需求

1. **讀取遠端賬號運行信息** - 從遠端服務器/其他電腦獲取賬號列表和狀態
2. **劇本傳送** - 後台推送劇本到遠端節點
3. **會話管理** - 上傳會話文件到遠端並管理

---

## 🔧 已實現的功能

### ✅ 1. 遠端賬號同步

**文件**:
- `admin-backend/app/api/group_ai/remote_account_sync.py` ✅
- `admin-backend/app/api/workers.py` ✅ (已增強)

**功能**:
- Worker 節點通過心跳上報賬號列表
- 後台自動同步到數據庫
- 自動更新賬號狀態

### ✅ 2. 劇本傳送（基礎）

**文件**:
- `admin-backend/app/api/group_ai/script_deployment.py` ✅

**功能**:
- 劇本推送 API
- 通過命令隊列發送推送指令

### ⏳ 3. 會話管理（待完善）

**需要實現**:
- 會話文件傳輸到遠端
- 會話文件同步機制

---

## 📋 使用場景和流程

### 場景 1: 自動同步遠端賬號

**流程**:
1. Worker 節點每 30 秒發送心跳，包含賬號列表
2. 後台接收心跳，自動同步賬號到數據庫
3. 前端顯示所有賬號，標記來源節點

**優勢**:
- ✅ 自動同步，無需手動操作
- ✅ 實時更新賬號狀態
- ✅ 統一管理界面

### 場景 2: 推送劇本到遠端

**流程**:
1. 在後台選擇劇本
2. 選擇目標 Worker 節點
3. 點擊「推送」
4. Worker 節點自動下載並更新劇本

**優勢**:
- ✅ 批量推送
- ✅ 自動更新
- ✅ 無需手動操作

### 場景 3: 會話文件管理

**流程**:
1. 上傳會話文件到後台
2. 選擇目標 Worker 節點
3. 後台傳輸會話文件
4. Worker 節點自動加載

---

## 🚀 下一步實現

### 立即需要

1. **添加劇本下載端點** - Worker 節點需要下載劇本
2. **前端 UI 增強** - 顯示遠端賬號、劇本推送 UI
3. **會話文件傳輸** - 實現會話文件傳輸機制

---

**基礎架構已建立，可以開始完整實現！**
