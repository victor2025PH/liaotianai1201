# 最终完整执行方案

> **说明**: 由于 SSH 输出缓冲限制，建议在服务器 SSH 会话中直接执行

---

## 🎯 推荐执行方式

### 在服务器 SSH 会话中执行（可以看到完整输出）

```bash
# 完整的执行命令（复制粘贴执行）
cd ~/liaotian/saas-demo && \
git pull origin master && \
chmod +x 简化执行-分步进行.sh && \
bash 简化执行-分步进行.sh
```

这个命令会：
1. ✅ 更新代码
2. ✅ 检查后端服务
3. ✅ 创建测试用户
4. ✅ 验证登录
5. ✅ 安装浏览器
6. ✅ 运行所有测试
7. ✅ 显示完整结果

---

## 📋 执行后的输出

您将看到类似以下输出：

```
========================================
简化分步执行脚本
========================================

[步骤 1] 准备环境
✅ 完成

[步骤 2] 检查后端服务
✅ 后端服务正常

[步骤 3] 创建测试用户
✅ 完成

[步骤 4] 验证登录
✅ 登录成功

[步骤 5] 安装浏览器
✅ 完成

[步骤 6] 运行测试
========================================
开始运行测试...
========================================

Running 10 tests...

✓ example.spec.ts (5s)
✓ dashboard.spec.ts (3s)
...

10 passed (2m)
```

---

## 🔍 如果遇到错误

### 错误 1: 后端服务未运行

```bash
# 在另一个终端启动后端
cd ~/liaotian/admin-backend
source .venv/bin/activate
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### 错误 2: 测试用户登录失败

脚本会自动尝试修复，如果仍然失败：

```bash
cd ~/liaotian/admin-backend
source .venv/bin/activate
export ADMIN_DEFAULT_PASSWORD=testpass123
python reset_admin_user.py
```

### 错误 3: 浏览器未安装

脚本会自动安装，如果失败：

```bash
cd ~/liaotian/saas-demo
npx playwright install chromium
```

---

## 📊 查看详细日志

测试执行后，日志保存在：

```bash
# 查看 Playwright 测试报告
npx playwright show-report

# 查看测试结果
ls -lh playwright-report/
```

---

## ✅ 验证测试完成

测试完成后，您会看到：

- ✅ 所有测试通过的统计
- ✅ 测试执行时间
- ✅ 测试报告位置

---

**所有脚本已准备就绪，请在服务器 SSH 会话中执行上述命令！**
