# 脚本找不到问题排查指南

## 问题现象

服务器上执行 `git pull` 显示 "Already up to date"，但脚本文件找不到。

## 可能的原因

1. **脚本文件没有真正推送到 GitHub**
2. **脚本文件被 .gitignore 忽略**
3. **脚本文件在不同分支**
4. **服务器拉取的路径不正确**

---

## 诊断步骤

### 在服务器上执行诊断

```bash
cd ~/liaotian

# 1. 查看远程仓库中所有脚本文件
echo "=== 远程仓库中的所有脚本文件 ==="
git ls-tree -r origin/main --name-only | grep "\.sh$"

# 2. 查看 scripts 目录下的文件
echo ""
echo "=== scripts 目录下的文件 ==="
git ls-tree -r origin/main --name-only scripts/

# 3. 查看 deploy 目录下的文件
echo ""
echo "=== deploy 目录下的文件 ==="
git ls-tree -r origin/main --name-only deploy/ | grep "\.sh$"

# 4. 查找 full_auto_complete 相关文件
echo ""
echo "=== 查找 full_auto_complete 文件 ==="
git ls-tree -r origin/main --name-only | grep -i "full_auto\|complete"

# 5. 查看最新提交中的文件
echo ""
echo "=== 最新提交中的文件 ==="
git log -1 --name-only --oneline origin/main
```

---

## 解决方案

### 方案 1: 如果文件确实不在远程

在本地执行：

```powershell
cd D:\telegram-ai-system

# 1. 确认文件存在
dir scripts\full_auto_complete.sh

# 2. 强制添加到 Git
git add -f scripts/full_auto_complete.sh

# 3. 提交
git commit -m "Add full_auto_complete.sh script"

# 4. 推送
git push origin main

# 5. 验证已推送
git ls-tree -r origin/main --name-only | Select-String "full_auto_complete"
```

### 方案 2: 如果文件路径不同

在服务器上查找实际路径：

```bash
cd ~/liaotian

# 查找所有包含 "complete" 的脚本
git ls-tree -r origin/main --name-only | grep -i "complete.*\.sh"
```

### 方案 3: 直接在服务器上创建脚本

如果文件确实不在远程，可以在服务器上直接创建：

```bash
cd ~/liaotian

# 使用我在文档中提供的脚本内容创建文件
# 或者从其他已存在的脚本修改
```

---

## 快速诊断命令

在服务器上执行这个一行命令来查看所有脚本：

```bash
cd ~/liaotian && git fetch origin main && git ls-tree -r origin/main --name-only | grep "\.sh$" | sort
```

这会显示远程仓库中所有的 .sh 文件。

---

## 验证文件是否在远程

### 方法 1: 检查远程文件列表

```bash
git ls-tree -r origin/main --name-only scripts/
```

### 方法 2: 尝试检出文件

```bash
git checkout origin/main -- scripts/full_auto_complete.sh
```

如果文件存在，会被检出。如果不存在，会报错。

### 方法 3: 查看文件历史

```bash
git log --all --oneline -- scripts/full_auto_complete.sh
```

如果文件从未被提交，这个命令不会有输出。

---

## 下一步操作

1. **先执行诊断命令**，查看远程仓库中实际有哪些文件
2. **根据诊断结果**，决定是重新推送文件还是在服务器上创建
3. **验证**文件确实存在后，再执行自动化脚本
