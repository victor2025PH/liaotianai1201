# 502 錯誤 - 完整修復流程

> **日期**: 2025-12-01  
> **問題**: 前端服務未運行

---

## 🚀 一鍵查找和啟動前端服務

執行以下完整命令：

```bash
echo "=== 查找並啟動前端服務 ===" && \
echo "" && \
echo "【步驟 1】查找前端項目..." && \
FRONTEND_PATH=$(find /home/ubuntu/liaotian -name "next.config.*" -type f 2>/dev/null | head -1 | xargs dirname) && \
if [ -z "$FRONTEND_PATH" ]; then
    echo "未找到 next.config，嘗試查找 package.json..."
    FRONTEND_PATH=$(find /home/ubuntu/liaotian -name "package.json" -type f 2>/dev/null | xargs grep -l "next" | head -1 | xargs dirname)
fi && \
if [ -n "$FRONTEND_PATH" ] && [ -f "$FRONTEND_PATH/package.json" ]; then
    echo "✅ 找到前端項目: $FRONTEND_PATH"
    cd "$FRONTEND_PATH"
    echo "" && \
    echo "【步驟 2】檢查 Node.js 和 npm..." && \
    node --version && npm --version && \
    echo "" && \
    echo "【步驟 3】停止舊進程..." && \
    pkill -f "node.*next\|npm.*dev" 2>/dev/null || true && \
    sleep 2 && \
    echo "" && \
    echo "【步驟 4】啟動前端服務..." && \
    nohup npm run dev > /tmp/frontend.log 2>&1 & \
    echo "等待服務啟動..." && \
    sleep 10 && \
    echo "" && \
    echo "【步驟 5】檢查服務狀態..." && \
    if lsof -i :3000 > /dev/null 2>&1; then
        echo "✅ 前端服務已啟動（端口 3000）"
        echo "測試響應:"
        curl -s http://127.0.0.1:3000 | head -5
    else
        echo "⚠️ 前端服務可能啟動失敗"
        echo "查看日誌:"
        tail -50 /tmp/frontend.log
    fi
else
    echo "❌ 未找到前端項目"
    echo "" && \
    echo "手動查找:" && \
    find /home/ubuntu/liaotian -type d -name "*saas*" -o -name "*frontend*" -o -name "*web*" 2>/dev/null | head -10
fi
```

---

## 📋 如果找不到前端項目

可能需要：
1. 檢查前端是否在其他位置
2. 檢查是否需要從 Git 拉取
3. 檢查是否需要構建生產版本

---

**執行上述命令，根據結果進行下一步！**
