# 服务器建群和聊天功能测试计划

## 测试时间
2025-11-22

## 测试目标

### 1. 测试服务器上的账号建群功能
- 验证账号在服务器上可以创建群组
- 验证群组创建后账号自动加入
- 验证群组信息正确返回

### 2. 测试服务器上的账号按剧本聊天功能
- 验证账号可以接收群组消息
- 验证账号按照剧本自动回复
- 验证对话流程正常

## 测试账号信息

- **账号ID**: 639641837416
- **服务器**: worker-01
- **状态**: 已在服务器上启动

## 测试步骤

### 步骤1: 检查账号状态
1. 获取账号详细信息
2. 确认账号状态为 online
3. 确认账号已分配到服务器

### 步骤2: 测试建群功能
1. 调用建群API
2. 验证群组创建成功
3. 验证账号自动加入群组
4. 获取群组信息

### 步骤3: 测试聊天功能
1. 发送测试消息到群组
2. 等待账号自动回复
3. 验证回复内容符合剧本
4. 验证对话流程

## 预期结果

### 建群功能
- ✅ 群组创建成功
- ✅ 账号自动加入群组
- ✅ 群组信息正确

### 聊天功能
- ✅ 账号可以接收消息
- ✅ 账号按照剧本自动回复
- ✅ 对话流程正常

## 相关API

### 建群API
```
POST /api/v1/group-ai/groups/create
{
  "account_id": "639641837416",
  "title": "测试群组-{timestamp}",
  "description": "用于测试服务器上的账号建群和聊天功能",
  "auto_reply": true
}
```

### 发送测试消息API
```
POST /api/v1/group-ai/groups/send-test-message
{
  "account_id": "639641837416",
  "group_id": {group_id},
  "message": "你好",
  "wait_for_reply": true,
  "wait_timeout": 15
}
```

## 测试脚本

将创建自动化测试脚本来执行以上测试步骤。

