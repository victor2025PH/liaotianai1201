# ğŸ”§ æ•¸æ“šåº«å•é¡Œè§£æ±ºæ–¹æ¡ˆ

## ğŸ” å•é¡Œåˆ†æ

å¾éŒ¯èª¤ä¿¡æ¯ä¾†çœ‹ï¼Œå­˜åœ¨ä»¥ä¸‹å•é¡Œï¼š

1. **è¡¨åè¡çª**ï¼šæ•¸æ“šåº«ä¸­å·²å­˜åœ¨ `users` è¡¨ï¼Œä½†å®ƒæ˜¯å¦ä¸€å€‹ç³»çµ±çš„è¡¨ï¼ˆåŒ…å« `usdt_balance`, `ton_balance` ç­‰å­—æ®µï¼‰
2. **é¡å‹ä¸åŒ¹é…**ï¼šç¾æœ‰ `users.id` æ˜¯ `TEXT` é¡å‹ï¼Œä½†æˆ‘å€‘çš„æ‡‰ç”¨éœ€è¦ `INTEGER` é¡å‹
3. **å­—æ®µä¸åŒ¹é…**ï¼šç¾æœ‰ `users` è¡¨æ²’æœ‰ `full_name`, `hashed_password` ç­‰å­—æ®µ

## âœ… è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ SQLiteï¼ˆæ¨è–¦ï¼Œé–‹ç™¼ç’°å¢ƒï¼‰

**å„ªé»ï¼š**
- ç°¡å–®ï¼Œç„¡éœ€é…ç½® PostgreSQL
- ä¸æœƒèˆ‡ç¾æœ‰è¡¨è¡çª
- é©åˆé–‹ç™¼å’Œæ¸¬è©¦

**åŸ·è¡Œæ­¥é©Ÿï¼š**

1. **è¨­ç½®ç’°å¢ƒè®Šé‡ä½¿ç”¨ SQLite**
   ```bash
   # åœ¨ .env æ–‡ä»¶ä¸­è¨­ç½®
   DATABASE_URL=sqlite:///./admin.db
   ```

2. **åˆå§‹åŒ–æ•¸æ“šåº«**
   ```bash
   python init_db_tables.py
   ```

3. **å•Ÿå‹•æœå‹™**
   ```bash
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
   ```

### æ–¹æ¡ˆ 2: ä½¿ç”¨ä¸åŒçš„ PostgreSQL Schema

**åŸ·è¡Œæ­¥é©Ÿï¼š**

1. **å‰µå»ºæ–°çš„ Schema**
   ```sql
   CREATE SCHEMA admin_backend;
   ```

2. **è¨­ç½®ç’°å¢ƒè®Šé‡**
   ```bash
   DATABASE_URL=postgresql://user:password@localhost/dbname?options=-csearch_path%3Dadmin_backend
   ```

### æ–¹æ¡ˆ 3: ä½¿ç”¨ä¸åŒçš„æ•¸æ“šåº«

**åŸ·è¡Œæ­¥é©Ÿï¼š**

1. **å‰µå»ºæ–°æ•¸æ“šåº«**
   ```sql
   CREATE DATABASE admin_backend;
   ```

2. **è¨­ç½®ç’°å¢ƒè®Šé‡**
   ```bash
   DATABASE_URL=postgresql://user:password@localhost/admin_backend
   ```

### æ–¹æ¡ˆ 4: ä½¿ç”¨è¡¨åå‰ç¶´ï¼ˆéœ€è¦ä¿®æ”¹ä»£ç¢¼ï¼‰

ä¿®æ”¹æ‰€æœ‰æ¨¡å‹ä½¿ç”¨å‰ç¶´ï¼Œå¦‚ `admin_users` è€Œä¸æ˜¯ `users`ã€‚

## ğŸš€ å¿«é€Ÿä¿®å¾©ï¼ˆæ¨è–¦ï¼‰

### ä½¿ç”¨ SQLiteï¼ˆæœ€ç°¡å–®ï¼‰

```bash
# 1. è¨­ç½®ç’°å¢ƒè®Šé‡
echo DATABASE_URL=sqlite:///./admin.db >> .env

# 2. åˆå§‹åŒ–æ•¸æ“šåº«
python init_db_tables.py

# 3. å•Ÿå‹•æœå‹™
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### æˆ–ä½¿ç”¨æœ¬åœ°é–‹ç™¼è…³æœ¬

```bash
# ä½¿ç”¨ start_local.pyï¼ˆå¼·åˆ¶ä½¿ç”¨ SQLiteï¼‰
python start_local.py
```

## ğŸ“‹ æª¢æŸ¥ç•¶å‰é…ç½®

```bash
# æª¢æŸ¥ç•¶å‰æ•¸æ“šåº«é…ç½®
python -c "from app.core.config import get_settings; print(get_settings().database_url)"
```

## âš ï¸ æ³¨æ„äº‹é …

1. **ç”Ÿç”¢ç’°å¢ƒ**ï¼šå»ºè­°ä½¿ç”¨ç¨ç«‹çš„æ•¸æ“šåº«æˆ– Schema
2. **æ•¸æ“šå‚™ä»½**ï¼šåˆ‡æ›æ•¸æ“šåº«å‰è«‹å‚™ä»½ç¾æœ‰æ•¸æ“š
3. **ç’°å¢ƒè®Šé‡**ï¼šç¢ºä¿ `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` æ­£ç¢ºè¨­ç½®

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025-01-17

