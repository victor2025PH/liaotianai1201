# å¿«é€Ÿæ‰¾åˆ°ç›®éŒ„ä¸¦é‡å•Ÿ

> **æ—¥æœŸ**: 2025-12-01

---

## ğŸš€ ä¸€éµå‘½ä»¤ï¼ˆæ¨è–¦ï¼‰

åŸ·è¡Œä»¥ä¸‹å‘½ä»¤è‡ªå‹•æŸ¥æ‰¾ä¸¦é‡å•Ÿï¼š

```bash
# æŸ¥æ‰¾é …ç›®ç›®éŒ„
BACKEND_DIR=$(find /home/ubuntu -name "main.py" -path "*/app/main.py" 2>/dev/null | head -1 | xargs dirname | xargs dirname | xargs dirname)

# å¦‚æœæ²’æ‰¾åˆ°ï¼Œå˜—è©¦å…¶ä»–è·¯å¾‘
if [ -z "$BACKEND_DIR" ]; then
    BACKEND_DIR=$(find /opt -name "main.py" -path "*/app/main.py" 2>/dev/null | head -1 | xargs dirname | xargs dirname | xargs dirname)
fi

# å¦‚æœé‚„æ˜¯æ²’æ‰¾åˆ°ï¼Œå˜—è©¦å¸¸è¦‹è·¯å¾‘
if [ -z "$BACKEND_DIR" ]; then
    for path in ~/telegram-ai-system/admin-backend ~/group-ai/admin-backend /opt/group-ai/admin-backend; do
        if [ -f "$path/app/main.py" ]; then
            BACKEND_DIR="$path"
            break
        fi
    done
fi

# å¦‚æœæ‰¾åˆ°äº†ï¼Œé‡å•Ÿæœå‹™
if [ -n "$BACKEND_DIR" ] && [ -d "$BACKEND_DIR" ]; then
    echo "æ‰¾åˆ°å¾Œç«¯ç›®éŒ„: $BACKEND_DIR"
    cd "$BACKEND_DIR"
    
    # æ¿€æ´»è™›æ“¬ç’°å¢ƒ
    if [ -f "../.venv/bin/activate" ]; then
        source ../.venv/bin/activate
    elif [ -f ".venv/bin/activate" ]; then
        source .venv/bin/activate
    fi
    
    # åœæ­¢èˆŠé€²ç¨‹
    pkill -f "uvicorn.*app.main:app" 2>/dev/null
    sleep 2
    
    # å•Ÿå‹•æœå‹™
    nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
    echo "å¾Œç«¯å·²å•Ÿå‹•ï¼Œç­‰å¾…5ç§’..."
    sleep 5
    
    # æª¢æŸ¥ç‹€æ…‹
    curl http://localhost:8000/health && echo "" && echo "âœ… å¾Œç«¯æœå‹™æ­£å¸¸"
else
    echo "âŒ æœªæ‰¾åˆ°å¾Œç«¯ç›®éŒ„ï¼Œè«‹æ‰‹å‹•æŒ‡å®š"
    echo "å˜—è©¦æŸ¥æ‰¾..."
    find /home/ubuntu -type d -name "admin-backend" 2>/dev/null | head -3
    find /opt -type d -name "admin-backend" 2>/dev/null | head -3
fi
```

---

## ğŸ” æ‰‹å‹•æŸ¥æ‰¾ï¼ˆå¦‚æœè‡ªå‹•æŸ¥æ‰¾å¤±æ•—ï¼‰

```bash
# æ–¹æ³•1: æŸ¥æ‰¾ admin-backend ç›®éŒ„
find ~ -type d -name "admin-backend" 2>/dev/null
find /opt -type d -name "admin-backend" 2>/dev/null

# æ–¹æ³•2: æŸ¥æ‰¾ main.py
find ~ -name "main.py" -path "*/app/main.py" 2>/dev/null
find /opt -name "main.py" -path "*/app/main.py" 2>/dev/null

# æ–¹æ³•3: æª¢æŸ¥å¸¸è¦‹è·¯å¾‘
ls -la ~/telegram-ai-system/admin-backend 2>/dev/null
ls -la ~/group-ai/admin-backend 2>/dev/null
ls -la /opt/group-ai/admin-backend 2>/dev/null
```

---

## âœ… æ¸¬è©¦ï¼ˆå¾Œç«¯é‡å•Ÿå¾Œï¼‰

```bash
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))") && \
curl -s -o /tmp/status.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" && \
echo "" && \
echo "éŸ¿æ‡‰å…§å®¹:" && \
python3 -m json.tool /tmp/status.json
```

---

**å…ˆåŸ·è¡Œä¸€éµå‘½ä»¤ï¼Œå‘Šè¨´æˆ‘çµæœï¼**
