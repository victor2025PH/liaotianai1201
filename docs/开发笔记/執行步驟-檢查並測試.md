# åŸ·è¡Œæ­¥é©Ÿ - æª¢æŸ¥ä¸¦æ¸¬è©¦

> **æ—¥æœŸ**: 2025-12-01

---

## ğŸ¯ åŸ·è¡Œé †åº

### æ­¥é©Ÿ 1: æª¢æŸ¥å¾Œç«¯ç‹€æ…‹

```bash
curl http://localhost:8000/health
```

**å¦‚æœè¿”å›** `{"status":"ok"}` â†’ **å¾Œç«¯æ­£åœ¨é‹è¡Œï¼Œç›´æ¥è·³åˆ°æ­¥é©Ÿ 3 æ¸¬è©¦**

**å¦‚æœè¿”å›éŒ¯èª¤æˆ–ç„¡éŸ¿æ‡‰** â†’ **å¾Œç«¯å·²åœæ­¢ï¼ŒåŸ·è¡Œæ­¥é©Ÿ 2 é‡å•Ÿ**

---

### æ­¥é©Ÿ 2: å¦‚æœå¾Œç«¯å·²åœæ­¢ï¼Œæ‰¾åˆ°ç›®éŒ„ä¸¦é‡å•Ÿ

```bash
# æŸ¥æ‰¾é …ç›®ç›®éŒ„
BACKEND_PATH=$(find ~ -type d -name "admin-backend" 2>/dev/null | head -1)
if [ -z "$BACKEND_PATH" ]; then
    BACKEND_PATH=$(find /opt -type d -name "admin-backend" 2>/dev/null | head -1)
fi

if [ -n "$BACKEND_PATH" ] && [ -f "$BACKEND_PATH/app/main.py" ]; then
    echo "æ‰¾åˆ°å¾Œç«¯ç›®éŒ„: $BACKEND_PATH"
    cd "$BACKEND_PATH"
    
    # æ¿€æ´»è™›æ“¬ç’°å¢ƒ
    source ../.venv/bin/activate 2>/dev/null || source .venv/bin/activate 2>/dev/null
    
    # å•Ÿå‹•æœå‹™
    nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
    sleep 5
    
    # é©—è­‰
    curl http://localhost:8000/health
else
    echo "æœªæ‰¾åˆ°å¾Œç«¯ç›®éŒ„ï¼Œè«‹æ‰‹å‹•æŸ¥æ‰¾:"
    echo "find ~ -type d -name 'admin-backend'"
    echo "find /opt -type d -name 'admin-backend'"
fi
```

---

### æ­¥é©Ÿ 3: æ¸¬è©¦ä¿®å¾©

```bash
# ç²å– Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; d=json.load(sys.stdin); print(d.get('access_token',''))" 2>/dev/null)

# æ¸¬è©¦ï¼ˆä¿å­˜éŸ¿æ‡‰åˆ°æ–‡ä»¶ï¼Œé¿å…è§£æéŒ¯èª¤ï¼‰
curl -s -o /tmp/test_status.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status"

echo ""
echo "éŸ¿æ‡‰å…§å®¹:"
python3 -m json.tool /tmp/test_status.json 2>/dev/null || cat /tmp/test_status.json
```

---

## ğŸš€ ä¸€éµåŸ·è¡Œï¼ˆæ‰€æœ‰æ­¥é©Ÿï¼‰

```bash
# æª¢æŸ¥ä¸¦æ¸¬è©¦
if curl -s http://localhost:8000/health 2>/dev/null | grep -q "ok"; then
    echo "âœ… å¾Œç«¯é‹è¡Œä¸­ï¼Œç›´æ¥æ¸¬è©¦..."
    TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
      -H "Content-Type: application/x-www-form-urlencoded" \
      -d "username=admin@example.com&password=changeme123" | \
      python3 -c "import sys, json; d=json.load(sys.stdin); print(d.get('access_token',''))" 2>/dev/null)
    curl -s -o /tmp/status.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
      -H "Authorization: Bearer $TOKEN" \
      "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" && \
    echo "" && python3 -m json.tool /tmp/status.json
else
    echo "å¾Œç«¯å·²åœæ­¢ï¼Œéœ€è¦é‡å•Ÿ"
fi
```

---

**å…ˆåŸ·è¡Œæ­¥é©Ÿ 1 æª¢æŸ¥ç‹€æ…‹ï¼Œå‘Šè¨´æˆ‘çµæœï¼**
