# æœå‹™å™¨ä¸Šç«‹å³åŸ·è¡Œå‘½ä»¤

> **æ—¥æœŸ**: 2025-12-01  
> **å•é¡Œ**: systemd æœå‹™ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹å‹•é‡å•Ÿå’Œæ¸¬è©¦

---

## ğŸ” ç¬¬ä¸€æ­¥ï¼šæª¢æŸ¥ç•¶å‰ç‹€æ…‹

```bash
# æª¢æŸ¥å¾Œç«¯é€²ç¨‹
ps aux | grep uvicorn | grep -v grep

# æª¢æŸ¥ç«¯å£ 8000
lsof -i :8000 || netstat -tlnp | grep :8000

# æª¢æŸ¥æœå‹™å¥åº·
curl http://localhost:8000/health
```

---

## ğŸ”„ ç¬¬äºŒæ­¥ï¼šé‡å•Ÿå¾Œç«¯ï¼ˆå¦‚æœæœå‹™åœ¨é‹è¡Œï¼‰

```bash
# åœæ­¢ç¾æœ‰é€²ç¨‹
pkill -f "uvicorn.*app.main:app"
sleep 3

# æŸ¥æ‰¾å¾Œç«¯ç›®éŒ„ï¼ˆé¸æ“‡ä¸€å€‹å­˜åœ¨çš„ï¼‰
cd /opt/group-ai/admin-backend || cd /opt/smart-tg/admin-backend || cd ~/group-ai/admin-backend

# å•Ÿå‹•æœå‹™
source ../.venv/bin/activate 2>/dev/null || source .venv/bin/activate 2>/dev/null
nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &
sleep 5

# é©—è­‰
curl http://localhost:8000/health
```

---

## ğŸ§ª ç¬¬ä¸‰æ­¥ï¼šæ¸¬è©¦ä¿®å¾©ï¼ˆæ­£ç¢ºçš„å‘½ä»¤ï¼‰

```bash
# ç²å– Token
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))")

# æ¸¬è©¦ï¼ˆä¿®æ­£ç‰ˆæœ¬ - åˆ†é–‹è™•ç†ç‹€æ…‹ç¢¼å’ŒéŸ¿æ‡‰ï¼‰
echo "=== æ¸¬è©¦è³¬è™Ÿç‹€æ…‹ç«¯é» ==="
curl -s -o /tmp/status_response.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status"

echo ""
echo "éŸ¿æ‡‰å…§å®¹:"
cat /tmp/status_response.json | python3 -m json.tool
```

---

## ğŸš€ ä¸€éµåŸ·è¡Œï¼ˆæ¨è–¦ï¼‰

åŸ·è¡Œä»¥ä¸‹å®Œæ•´å‘½ä»¤ï¼š

```bash
# åœæ­¢ä¸¦é‡å•Ÿ
pkill -f "uvicorn.*app.main:app" 2>/dev/null; sleep 3; \
cd /opt/group-ai/admin-backend 2>/dev/null || cd /opt/smart-tg/admin-backend 2>/dev/null || cd ~/group-ai/admin-backend; \
(source ../.venv/bin/activate 2>/dev/null || source .venv/bin/activate 2>/dev/null); \
nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 & \
sleep 5 && \
echo "âœ… å¾Œç«¯å·²é‡å•Ÿ" && \
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; print(json.loads(sys.stdin.read()).get('access_token', ''))") && \
curl -s -o /tmp/status.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" && \
echo "" && echo "éŸ¿æ‡‰:" && cat /tmp/status.json | python3 -m json.tool
```

---

**å…ˆåŸ·è¡Œç¬¬ä¸€æ­¥æª¢æŸ¥ç‹€æ…‹ï¼Œå‘Šè¨´æˆ‘çµæœï¼Œæˆ‘å†æä¾›å…·é«”çš„é‡å•Ÿæ­¥é©Ÿï¼**
