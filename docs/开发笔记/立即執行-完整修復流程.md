# ç«‹å³åŸ·è¡Œ - å®Œæ•´ä¿®å¾©æµç¨‹

> **æ—¥æœŸ**: 2025-12-01

---

## ğŸš€ ä¸€éµä¿®å¾©ä¸¦é‡å•Ÿ

åŸ·è¡Œä»¥ä¸‹å®Œæ•´å‘½ä»¤ï¼š

```bash
cd /home/ubuntu/liaotian/deployment-package/admin-backend && \
echo "ã€1ã€‘æª¢æŸ¥ä¸¦ä¿®å¾© session_export.py å°å…¥..." && \
if grep -q "from app.core.permissions import.*check_permission" app/api/group_ai/session_export.py; then
    echo "ç™¼ç¾éŒ¯èª¤å°å…¥ï¼Œæ­£åœ¨ä¿®å¾©..."
    sed -i 's/from app.core.permissions import PermissionCode, check_permission/from app.core.permissions import PermissionCode\nfrom app.middleware.permission import check_permission/' app/api/group_ai/session_export.py
    echo "âœ… å°å…¥å·²ä¿®å¾©"
else
    echo "âœ… å°å…¥èªå¥æ­£ç¢º"
fi && \
echo "" && \
echo "ã€2ã€‘åœæ­¢èˆŠæœå‹™..." && \
pkill -f "uvicorn.*app.main:app" && sleep 3 && \
echo "ã€3ã€‘å•Ÿå‹•æ–°æœå‹™..." && \
export PYTHONPATH=/home/ubuntu/liaotian/deployment-package && \
/home/ubuntu/liaotian/admin-backend/.venv/bin/python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend_final2.log 2>&1 & \
sleep 5 && \
echo "ã€4ã€‘æª¢æŸ¥æœå‹™ç‹€æ…‹..." && \
curl http://localhost:8000/health
```

---

## âœ… å¦‚æœæœå‹™å•Ÿå‹•æˆåŠŸï¼Œæ¸¬è©¦ä¿®å¾©

```bash
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=changeme123" | \
  python3 -c "import sys, json; d=json.load(sys.stdin); print(d.get('access_token',''))" 2>/dev/null) && \
echo "=== æ¸¬è©¦è³¬è™Ÿç‹€æ…‹ç«¯é»ä¿®å¾© ===" && \
curl -s -o /tmp/test_status.json -w "HTTPç‹€æ…‹ç¢¼: %{http_code}\n" \
  -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/v1/group-ai/accounts/639454959591/status" && \
echo "" && \
python3 -m json.tool /tmp/test_status.json 2>/dev/null || cat /tmp/test_status.json
```

---

**åŸ·è¡Œå®Œæ•´ä¿®å¾©å‘½ä»¤ï¼Œå‘Šè¨´æˆ‘çµæœï¼**
