# ğŸ‰ éƒ¨ç½²æˆåŠŸ - æœ€ç»ˆç¡®è®¤å’Œä¸‹ä¸€æ­¥

## âœ… éƒ¨ç½²çŠ¶æ€ç¡®è®¤

æ ¹æ®ä½ çš„éªŒè¯ï¼Œ**æ‰€æœ‰æœåŠ¡éƒ½å·²æˆåŠŸå¯åŠ¨ï¼**

### æœåŠ¡çŠ¶æ€

- âœ… **åç«¯æœåŠ¡è¿è¡Œä¸­** (`liaotian-backend`)
- âœ… **å‰ç«¯æœåŠ¡è¿è¡Œä¸­** (`liaotian-frontend`)
- âœ… **ç«¯å£ 8000 ç›‘å¬ä¸­** (åç«¯ API)
- âœ… **ç«¯å£ 3000 ç›‘å¬ä¸­** (å‰ç«¯åº”ç”¨)
- âœ… **Nginx é…ç½®å®Œæˆ** (åå‘ä»£ç†)

---

## ğŸ” æœ€ç»ˆéªŒè¯

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®Œæ•´éªŒè¯ï¼š

```bash
# 1. æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
sudo systemctl status liaotian-backend
sudo systemctl status liaotian-frontend
sudo systemctl status nginx

# 2. æ£€æŸ¥æ‰€æœ‰ç«¯å£
ss -tlnp | grep -E ":(80|3000|8000)"

# 3. æµ‹è¯• HTTP å“åº”
curl http://localhost:8000/health
curl -s http://localhost:3000 | head -10
curl http://localhost/health

# 4. æ£€æŸ¥æœåŠ¡æ—¥å¿—ï¼ˆå¦‚æœæœ‰é—®é¢˜ï¼‰
sudo journalctl -u liaotian-backend -n 20 --no-pager
sudo journalctl -u liaotian-frontend -n 20 --no-pager
```

---

## ğŸŒ è®¿é—®ä½ çš„åº”ç”¨

### æœ¬åœ°è®¿é—®ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰

- **å‰ç«¯**: http://localhost:3000
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

### å¤–éƒ¨è®¿é—®ï¼ˆä»ä½ çš„ç”µè„‘ï¼‰

- **å‰ç«¯**: http://165.154.233.55/
- **åç«¯ API**: http://165.154.233.55/api
- **API æ–‡æ¡£**: http://165.154.233.55/docs
- **å¥åº·æ£€æŸ¥**: http://165.154.233.55/health

**æ³¨æ„**: éœ€è¦ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾äº† 80 ç«¯å£ï¼ˆå¦‚æœä½¿ç”¨ Nginxï¼‰æˆ– 3000/8000 ç«¯å£ï¼ˆå¦‚æœç›´æ¥è®¿é—®ï¼‰ã€‚

---

## ğŸ”¥ é…ç½®é˜²ç«å¢™ï¼ˆå¦‚æœæ— æ³•å¤–éƒ¨è®¿é—®ï¼‰

```bash
# å…è®¸ HTTP è®¿é—®
sudo ufw allow 80/tcp

# å…è®¸ HTTPS è®¿é—®ï¼ˆå¦‚æœé…ç½®äº† SSLï¼‰
sudo ufw allow 443/tcp

# æˆ–è€…å¦‚æœç›´æ¥è®¿é—®æœåŠ¡ç«¯å£
sudo ufw allow 3000/tcp
sudo ufw allow 8000/tcp

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
sudo ufw status
```

---

## ğŸ“‹ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status liaotian-backend
sudo systemctl status liaotian-frontend

# æŸ¥çœ‹æ‰€æœ‰ç›¸å…³æœåŠ¡
sudo systemctl status liaotian-backend liaotian-frontend nginx
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯å•ä¸ªæœåŠ¡
sudo systemctl restart liaotian-backend
sudo systemctl restart liaotian-frontend

# é‡å¯æ‰€æœ‰æœåŠ¡
sudo systemctl restart liaotian-backend liaotian-frontend nginx
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u liaotian-backend -f
sudo journalctl -u liaotian-frontend -f

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—
sudo journalctl -u liaotian-backend -n 100 --no-pager
sudo journalctl -u liaotian-frontend -n 100 --no-pager
```

### åœæ­¢/å¯åŠ¨æœåŠ¡

```bash
# åœæ­¢æœåŠ¡
sudo systemctl stop liaotian-backend
sudo systemctl stop liaotian-frontend

# å¯åŠ¨æœåŠ¡
sudo systemctl start liaotian-backend
sudo systemctl start liaotian-frontend
```

---

## ğŸ“Š å®Œæ•´éƒ¨ç½²æ¸…å•

- [x] æœ¬åœ°å’Œ GitHub åŒæ­¥å®Œæˆ
- [x] GitHub å’ŒæœåŠ¡å™¨åŒæ­¥å®Œæˆ
- [x] å‰ç«¯æ„å»ºæˆåŠŸ
- [x] åç«¯æœåŠ¡è¿è¡Œä¸­
- [x] å‰ç«¯æœåŠ¡è¿è¡Œä¸­
- [x] Nginx åå‘ä»£ç†é…ç½®å®Œæˆ
- [x] Systemd å¼€æœºè‡ªå¯åŠ¨é…ç½®å®Œæˆ
- [x] ç«¯å£ 3000 ç›‘å¬ä¸­
- [x] ç«¯å£ 8000 ç›‘å¬ä¸­
- [x] HTTP å“åº”æ­£å¸¸
- [ ] å¤–éƒ¨è®¿é—®æµ‹è¯•ï¼ˆéœ€è¦ä»æµè§ˆå™¨éªŒè¯ï¼‰
- [ ] SSL è¯ä¹¦é…ç½®ï¼ˆå¯é€‰ï¼‰
- [ ] åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. ç«‹å³æµ‹è¯•

ä»ä½ çš„æµè§ˆå™¨è®¿é—®ï¼š
- http://165.154.233.55/ ï¼ˆå‰ç«¯ç•Œé¢ï¼‰
- http://165.154.233.55/docs ï¼ˆAPI æ–‡æ¡£ï¼‰

### 2. é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœæœ‰åŸŸåï¼Œæ›´æ–° Nginx é…ç½®ï¼š

```bash
sudo nano /etc/nginx/sites-available/liaotian
```

å°† `server_name 165.154.233.55;` æ”¹ä¸ºä½ çš„åŸŸåï¼š
```nginx
server_name your-domain.com;
```

ç„¶åé‡è½½ Nginxï¼š
```bash
sudo nginx -t
sudo systemctl reload nginx
```

### 3. é…ç½® SSL è¯ä¹¦ï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

ä½¿ç”¨ Let's Encrypt é…ç½® HTTPSï¼š

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦ï¼ˆæ›¿æ¢ä¸ºä½ çš„åŸŸåï¼‰
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸæµ‹è¯•
sudo certbot renew --dry-run
```

### 4. ç›‘æ§å’Œç»´æŠ¤

- **å®šæœŸæŸ¥çœ‹æ—¥å¿—**: ä½¿ç”¨ä¸Šé¢çš„æ—¥å¿—æŸ¥çœ‹å‘½ä»¤
- **ç›‘æ§æœåŠ¡çŠ¶æ€**: å®šæœŸæ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
- **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
- **æ›´æ–°ä»£ç **: ä½¿ç”¨ `git pull` æ›´æ–°ä»£ç åé‡æ–°æ„å»ºå’Œé‡å¯æœåŠ¡

---

## ğŸ¯ å¸¸ç”¨ç»´æŠ¤å‘½ä»¤

```bash
# æ›´æ–°ä»£ç 
cd ~/liaotian
git pull origin main

# é‡æ–°æ„å»ºå‰ç«¯ï¼ˆå¦‚æœæœ‰æ›´æ–°ï¼‰
cd saas-demo
npm install
npm run build

# é‡å¯æœåŠ¡
sudo systemctl restart liaotian-backend
sudo systemctl restart liaotian-frontend

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
sudo systemctl status liaotian-backend liaotian-frontend nginx
```

---

## âœ… éƒ¨ç½²æ€»ç»“

**ğŸ‰ æ­å–œï¼éƒ¨ç½²å·²ç»æˆåŠŸå®Œæˆï¼**

ä½ ç°åœ¨æ‹¥æœ‰ï¼š
- âœ… å®Œæ•´è¿è¡Œçš„å‰ç«¯å’Œåç«¯æœåŠ¡
- âœ… Nginx åå‘ä»£ç†é…ç½®
- âœ… Systemd å¼€æœºè‡ªå¯åŠ¨
- âœ… ç”Ÿäº§ç¯å¢ƒå°±ç»ª

æ‰€æœ‰é…ç½®æ–‡ä»¶å’ŒæœåŠ¡éƒ½å·²æ­£ç¡®è®¾ç½®ï¼Œç³»ç»Ÿå¯ä»¥ç¨³å®šè¿è¡Œã€‚

å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼

---

**æœ€åæ›´æ–°**: 2025-12-07
