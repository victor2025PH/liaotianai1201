# å¤šè³¬è™Ÿé…ç½®ç®¡ç†æ–¹æ¡ˆ

> **æ—¥æœŸ**: 2025-12-01  
> **éœ€æ±‚**: æ”¯æŒæ¯å€‹è³¬è™Ÿä½¿ç”¨ä¸åŒçš„ Telegram API IDã€Hash å’Œ Session Name

---

## ğŸ“‹ éœ€æ±‚åˆ†æ

### å•é¡Œ

- `TELEGRAM_API_ID` - æ¯å€‹è³¬è™Ÿä¸åŒ
- `TELEGRAM_API_HASH` - æ¯å€‹è³¬è™Ÿä¸åŒ  
- `TELEGRAM_SESSION_NAME` - æ¯å€‹è³¬è™Ÿä¸åŒï¼ˆé€šå¸¸æ˜¯é›»è©±è™Ÿç¢¼ï¼‰

### è§£æ±ºæ–¹æ¡ˆ

1. **æ‰¹é‡å°å…¥** - å¾ TXT/Excel æ–‡ä»¶å°å…¥å¤šå€‹è³¬è™Ÿé…ç½®
2. **API æäº¤** - å‰µå»ºè³¬è™Ÿæ™‚å‹•æ…‹æäº¤é…ç½®

---

## ğŸ¯ å¯¦ç¾æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: æ‰¹é‡å°å…¥ï¼ˆå·²å¯¦ç¾ï¼‰

#### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

**TXT æ ¼å¼**ï¼ˆæ¯è¡Œä¸€å€‹è³¬è™Ÿï¼‰:
```
API_ID|API_HASH|SESSION_NAME
123456|abc123def456|+1234567890
789012|xyz789uvw012|+9876543210
```

æˆ–ä½¿ç”¨é€—è™Ÿåˆ†éš”:
```
API_ID,API_HASH,SESSION_NAME
123456,abc123def456,+1234567890
789012,xyz789uvw012,+9876543210
```

**Excel æ ¼å¼**:
| API_ID | API_HASH | SESSION_NAME |
|--------|----------|--------------|
| 123456 | abc123def456 | +1234567890 |
| 789012 | xyz789uvw012 | +9876543210 |

#### ä½¿ç”¨æ–¹æ³•

```bash
# å°å…¥ TXT æ–‡ä»¶
python admin-backend/scripts/import_telegram_accounts.py accounts.txt

# å°å…¥ Excel æ–‡ä»¶
python admin-backend/scripts/import_telegram_accounts.py accounts.xlsx
```

#### å­˜å„²æ–¹å¼

é…ç½®å­˜å„²åœ¨ `GroupAIAccount` è¡¨çš„ `config` å­—æ®µä¸­ï¼š
```json
{
  "telegram_api_id": "123456",
  "telegram_api_hash": "abc123def456",
  "telegram_session_name": "+1234567890"
}
```

---

### æ–¹æ¡ˆ 2: API å‹•æ…‹æäº¤ï¼ˆå¾…å¯¦ç¾ï¼‰

#### API ç«¯é»

å‰µå»ºè³¬è™Ÿæ™‚ï¼Œå¯ä»¥é€šé API æäº¤ Telegram é…ç½®ï¼š

```bash
POST /api/v1/group-ai/accounts
{
  "account_id": "+1234567890",
  "telegram_api_id": "123456",
  "telegram_api_hash": "abc123def456",
  "telegram_session_name": "+1234567890",
  ...
}
```

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### 1. æº–å‚™é…ç½®æ–‡ä»¶

å‰µå»º `telegram_accounts.txt`:
```
123456|abc123def456|+1234567890
789012|xyz789uvw012|+9876543210
```

### 2. å°å…¥é…ç½®

```bash
cd /home/ubuntu/liaotian/deployment-package
source /home/ubuntu/liaotian/admin-backend/.venv/bin/activate
export PYTHONPATH=/home/ubuntu/liaotian/deployment-package

python admin-backend/scripts/import_telegram_accounts.py telegram_accounts.txt
```

### 3. é©—è­‰å°å…¥

```bash
# æª¢æŸ¥æ•¸æ“šåº«ä¸­çš„è³¬è™Ÿé…ç½®
python3 << 'PYEOF'
from app.db import SessionLocal
from app.models.group_ai import GroupAIAccount

db = SessionLocal()
accounts = db.query(GroupAIAccount).all()
for acc in accounts:
    print(f"è³¬è™Ÿ: {acc.account_id}")
    if acc.config:
        print(f"  API ID: {acc.config.get('telegram_api_id', 'æœªè¨­ç½®')}")
        print(f"  API Hash: {acc.config.get('telegram_api_hash', 'æœªè¨­ç½®')[:10]}...")
        print(f"  Session Name: {acc.config.get('telegram_session_name', 'æœªè¨­ç½®')}")
db.close()
PYEOF
```

---

## ğŸ”§ å¾ŒçºŒæ”¹é€²

### 1. æ”¯æŒæ›´æ–°é…ç½®

å…è¨±æ›´æ–°ç¾æœ‰è³¬è™Ÿçš„ Telegram é…ç½®ã€‚

### 2. é…ç½®é©—è­‰

å°å…¥æ™‚é©—è­‰é…ç½®æ ¼å¼å’Œæœ‰æ•ˆæ€§ã€‚

### 3. é…ç½®åŠ å¯†

æ•æ„Ÿé…ç½®ï¼ˆAPI Hashï¼‰å¯ä»¥åŠ å¯†å­˜å„²ã€‚

### 4. é…ç½®æ¨¡æ¿

æä¾›é…ç½®æ¨¡æ¿æ–‡ä»¶ï¼Œæ–¹ä¾¿å¡«å¯«ã€‚

---

## ğŸ“‹ æ–‡ä»¶æ¸…å–®

- `admin-backend/scripts/import_telegram_accounts.py` - æ‰¹é‡å°å…¥è…³æœ¬
- `docs/å¼€å‘ç¬”è®°/å¤šè³¬è™Ÿé…ç½®ç®¡ç†æ–¹æ¡ˆ-20251201.md` - æœ¬æ–‡æª”
- `deploy/é…ç½®åŸºæœ¬ç’°å¢ƒè®Šé‡.sh` - åŸºæœ¬ç’°å¢ƒè®Šé‡é…ç½®è…³æœ¬

---

**æ–¹æ¡ˆå·²å¯¦ç¾ï¼Œå¯ä»¥ä½¿ç”¨æ‰¹é‡å°å…¥åŠŸèƒ½ï¼**
