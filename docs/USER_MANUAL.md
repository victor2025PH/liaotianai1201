# 用户手册

欢迎使用 Telegram AI 管理系统！本手册将帮助您快速上手并充分利用系统功能。

## 目录

- [快速开始](#快速开始)
- [仪表板](#仪表板)
- [账号管理](#账号管理)
- [脚本管理](#脚本管理)
- [监控和告警](#监控和告警)
- [系统设置](#系统设置)
- [常见问题](#常见问题)

## 快速开始

### 登录系统

1. 访问系统URL（例如: `https://your-domain.com`）
2. 使用管理员账号登录：
   - 默认邮箱: `admin@example.com`
   - 默认密码: `changeme123`（首次登录后请立即修改）

### 修改密码

1. 点击右上角用户头像
2. 选择"设置"
3. 在"安全"标签页中修改密码

## 仪表板

仪表板提供系统整体概览，包括：

### 关键指标

- **总账号数**: 系统中所有账号的数量
- **活跃账号数**: 当前正在运行的账号数量
- **总脚本数**: 已创建的脚本总数
- **消息总数**: 系统处理的消息总数

### 最近会话

显示最近的会话活动，包括：
- 会话ID
- 用户信息
- 消息数量
- 状态和持续时间

### 最近错误

显示系统最近的错误信息，帮助快速定位问题。

## 账号管理

### 查看账号列表

1. 导航到"群组AI" > "账号管理"
2. 使用搜索框查找特定账号
3. 使用筛选器按状态、服务器等条件筛选

### 添加账号

1. 点击"添加账号"按钮
2. 填写以下信息：
   - **手机号**: Telegram账号手机号
   - **脚本**: 选择要使用的脚本
   - **服务器**: 选择运行服务器
3. 点击"保存"

### 启动/停止账号

- 在账号列表中，点击账号状态开关
- 或选择账号后点击"启动"/"停止"按钮

### 编辑账号

1. 在账号列表中点击账号行
2. 修改需要更改的信息
3. 点击"保存"

### 删除账号

1. 选择要删除的账号
2. 点击"删除"按钮
3. 确认删除操作

## 脚本管理

### 查看脚本列表

1. 导航到"群组AI" > "脚本管理"
2. 使用搜索和筛选功能查找脚本

### 创建脚本

1. 点击"创建脚本"按钮
2. 填写脚本信息：
   - **名称**: 脚本名称
   - **描述**: 脚本功能描述
   - **内容**: YAML格式的脚本内容
3. 点击"保存"

### 脚本格式

脚本使用YAML格式，基本结构：

```yaml
script_id: "script-001"
version: "1.0.0"
scenes:
  - id: "scene-001"
    name: "欢迎场景"
    triggers:
      - type: "message"
        keywords: ["你好", "hello"]
    responses:
      - type: "text"
        content: "欢迎使用！"
```

### 脚本审核

- **草稿**: 正在编辑中的脚本
- **审核中**: 提交审核等待批准
- **已发布**: 审核通过，可以使用
- **已禁用**: 暂时停用

### 脚本版本管理

系统自动保存脚本版本历史，可以：
- 查看历史版本
- 对比版本差异
- 回滚到旧版本

## 监控和告警

### 性能监控

访问"性能监控"页面查看：
- **请求统计**: API请求总数和平均响应时间
- **慢请求**: 响应时间超过阈值的请求
- **端点统计**: 各API端点的性能数据
- **状态码统计**: HTTP状态码分布

### 健康检查

访问"健康检查"页面查看：
- **系统状态**: 整体健康状态（健康/降级/异常）
- **组件状态**: 各组件（数据库、缓存、服务等）的状态
- **详细信息**: 每个组件的响应时间和元数据

### 告警管理

#### 查看告警

1. 导航到"监控" > "告警管理"
2. 查看活跃告警列表
3. 使用筛选器按严重程度、类型等筛选

#### 告警操作

- **静默**: 暂时抑制告警通知
- **确认**: 标记告警已处理
- **解决**: 标记告警已解决

#### 告警统计

查看告警统计信息：
- 总告警数
- 活跃告警数
- 按严重程度分类的告警数量

### 日志查看

1. 导航到"群组AI" > "日志"
2. 使用筛选器：
   - **级别**: 错误/警告/信息
   - **来源**: 日志来源
   - **时间范围**: 选择时间范围
   - **关键词搜索**: 搜索特定内容
3. 点击日志条目查看详细信息

## 系统设置

### 告警规则配置

1. 导航到"设置" > "告警规则"
2. 配置各项告警阈值：
   - API响应时间阈值
   - 系统资源使用率阈值
   - 服务健康检查配置
3. 设置通知方式（邮件/Telegram/Webhook）
4. 保存配置

### 通知配置

1. 导航到"设置" > "通知"
2. 配置通知渠道：
   - **邮件**: SMTP服务器配置
   - **Telegram**: Bot Token和Chat ID
   - **Webhook**: Webhook URL
3. 测试通知功能

### 用户和权限

#### 用户管理

1. 导航到"设置" > "用户"
2. 查看用户列表
3. 创建、编辑或删除用户

#### 角色管理

1. 导航到"设置" > "角色"
2. 创建角色并分配权限
3. 将角色分配给用户

## 常见问题

### 账号无法启动

**可能原因**:
1. 会话文件不存在或无效
2. 脚本配置错误
3. 服务器连接问题

**解决方法**:
1. 检查账号的会话文件是否存在
2. 验证脚本配置是否正确
3. 检查服务器状态和网络连接
4. 查看日志获取详细错误信息

### 脚本执行错误

**可能原因**:
1. 脚本格式错误
2. 触发条件不匹配
3. API调用失败

**解决方法**:
1. 检查脚本YAML格式是否正确
2. 验证触发条件配置
3. 检查相关API服务是否正常
4. 查看错误日志

### 性能问题

**可能原因**:
1. 数据库查询慢
2. 缓存未生效
3. 系统资源不足

**解决方法**:
1. 查看性能监控页面识别慢请求
2. 检查数据库索引是否正常
3. 验证缓存配置
4. 检查服务器资源使用情况

### 告警过多

**解决方法**:
1. 调整告警阈值
2. 使用告警聚合功能
3. 静默重复告警
4. 优化系统配置减少错误

## 快捷键

- `Ctrl + K`: 快速搜索
- `F8`: 打开通知面板
- `Esc`: 关闭对话框

## 获取帮助

- **文档**: 查看完整文档
- **API文档**: 访问 `/docs` 查看API文档
- **支持**: 联系技术支持团队

---

**版本**: 1.0.0  
**最后更新**: 2025-01-09

