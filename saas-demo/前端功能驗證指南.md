# 前端功能驗證指南

> **生成時間**: 2025-11-26  
> **版本**: v1.0

## 📋 快速開始

### 1. 啟動服務

#### 啟動後端服務
```bash
cd admin-backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
```

#### 啟動前端服務
```bash
cd saas-demo
npm run dev
```

### 2. 運行驗證腳本

**Windows (PowerShell):**
```powershell
cd saas-demo
.\scripts\verify-frontend.ps1
```

**Linux/Mac:**
```bash
cd saas-demo
chmod +x scripts/verify-frontend.sh
./scripts/verify-frontend.sh
```

### 3. 訪問系統

- **前端地址**: http://localhost:3000
- **後端 API**: http://localhost:8000
- **API 文檔**: http://localhost:8000/docs

---

## ✅ 驗證清單

### 1. 賬號管理頁面 (`/group-ai/accounts`)

#### 基本功能
- [ ] 頁面正常加載
- [ ] 賬號列表顯示正常
- [ ] 搜索功能（賬號ID、名稱）
- [ ] 過濾功能（狀態、劇本、服務器）
- [ ] 排序功能

#### 賬號操作
- [ ] **創建單個賬號**
  - 填寫賬號信息
  - 選擇 session 文件
  - 選擇劇本
  - 保存成功

- [ ] **批量創建賬號**（重點驗證）⭐
  - 點擊"批量創建"按鈕
  - 選擇多個 session 文件
  - 驗證只創建選中的數量（不是所有文件）
  - 驗證賬號資料信息（頭像、名稱、內容）正確讀取

- [ ] **編輯賬號**
  - 點擊編輯按鈕
  - 修改頭像、名稱、內容
  - 保存成功
  - 驗證修改後的數據顯示

- [ ] **批量操作**
  - 選擇多個賬號
  - 批量啟動
  - 批量停止
  - 批量刪除

#### 數據驗證
- [ ] 賬號資料信息顯示（頭像、名稱、內容）
- [ ] 狀態更新實時性
- [ ] 分頁功能

---

### 2. 劇本管理頁面 (`/group-ai/scripts`)

#### 基本功能
- [ ] 劇本列表顯示
- [ ] 搜索和過濾
- [ ] 版本管理

#### 劇本操作
- [ ] **創建劇本**
  - 填寫劇本信息
  - 編寫 YAML 內容
  - 保存成功
  - **驗證劇本不丟失**（刷新頁面後仍存在）⭐

- [ ] **編輯劇本**
  - 修改劇本內容
  - 保存成功

- [ ] **版本管理**
  - 查看版本歷史
  - 比較版本
  - 恢復版本

#### 數據持久化驗證
- [ ] 創建劇本後刷新頁面，劇本仍然存在
- [ ] 編輯後保存，修改持久化
- [ ] 版本歷史正確保存

---

### 3. 自動化任務頁面 (`/group-ai/automation-tasks`) ⭐ 重點驗證

#### 基本功能
- [ ] 任務列表顯示
- [ ] 任務詳情查看
- [ ] 任務狀態顯示

#### 任務創建（重點驗證新功能）

- [ ] **基本配置**
  - 填寫任務名稱
  - 選擇任務類型（定時、觸發、手動）
  - 選擇任務動作

- [ ] **調度配置**
  - Cron 表達式配置
  - 間隔配置
  - 模板選擇

- [ ] **依賴任務配置** ⭐ 新功能
  - 依賴任務選擇器顯示
  - 可以選擇多個依賴任務
  - 選中的依賴任務顯示為 Badge
  - 可以移除已選的依賴任務
  - 保存後依賴任務正確保存

- [ ] **通知配置** ⭐ 新功能
  - "成功時通知"開關
  - "失敗時通知"開關（默認啟用）
  - 通知接收人輸入框
  - 可以添加多個接收人（郵箱或用戶ID）
  - 接收人顯示為 Badge
  - 可以移除接收人
  - 保存後通知配置正確保存

#### 任務操作
- [ ] **編輯任務**
  - 打開編輯對話框
  - 修改配置（包括依賴和通知）
  - 保存成功
  - 驗證修改後的配置顯示

- [ ] **執行任務**
  - 點擊"執行"按鈕
  - 任務執行成功
  - 統計數據更新（執行次數、成功次數）

- [ ] **查看日誌**
  - 點擊"查看日誌"
  - 日誌列表顯示
  - 日誌詳情查看

- [ ] **啟用/停用任務**
  - 切換任務狀態
  - 狀態正確更新

- [ ] **刪除任務**
  - 確認刪除
  - 任務從列表中移除

#### 新功能驗證重點

1. **依賴任務功能**
   - [ ] 創建任務時可以選擇依賴任務
   - [ ] 保存後依賴任務列表正確顯示
   - [ ] 執行任務後，依賴任務自動觸發
   - [ ] 依賴任務的執行日誌可以查看

2. **通知功能**
   - [ ] 任務執行成功後，如果啟用了"成功時通知"，發送通知
   - [ ] 任務執行失敗後，如果啟用了"失敗時通知"，發送通知
   - [ ] 通知發送到配置的接收人
   - [ ] 通知在通知中心顯示

---

### 4. 通知中心 (`/notifications`)

#### 通知列表
- [ ] 通知列表顯示
- [ ] 未讀數量顯示（右上角鈴鐺圖標）
- [ ] 過濾功能（已讀/未讀）
- [ ] 通知詳情查看

#### 批量操作
- [ ] 選擇多個通知
- [ ] 批量標記已讀
- [ ] 批量刪除

---

### 5. 群組監控頁面 (`/group-ai/groups`)

#### 基本功能
- [ ] 頁面正常加載（不再 404）⭐
- [ ] 群組列表顯示
- [ ] 搜索功能
- [ ] 統計卡片顯示

---

### 6. 其他頁面

- [ ] 節點管理頁面 (`/group-ai/nodes`)
- [ ] 角色分配頁面 (`/group-ai/role-assignments`)
- [ ] 分配方案頁面 (`/group-ai/role-assignment-schemes`)
- [ ] 系統監控頁面 (`/monitoring`)

---

## 🐛 已知問題驗證

### 問題 1: 批量創建賬號數量不正確
**驗證步驟：**
1. 選擇 3 個 session 文件
2. 點擊批量創建
3. **驗證：** 只創建 3 個賬號，不是所有文件

### 問題 2: 賬號資料信息未讀取
**驗證步驟：**
1. 創建賬號後
2. **驗證：** 頭像、名稱、內容正確顯示

### 問題 3: 劇本丟失
**驗證步驟：**
1. 創建劇本
2. 刷新頁面
3. **驗證：** 劇本仍然存在

### 問題 4: API 配置統一
**驗證步驟：**
1. 打開瀏覽器開發者工具（F12）
2. 查看 Network 標籤
3. **驗證：** 所有 API 請求都使用正確的 API 地址（不是 localhost:8000）
4. **驗證：** 沒有 CORS 錯誤

---

## 📝 驗證記錄模板

### 驗證日期：___________

### 驗證人員：___________

### 驗證結果：

#### 通過的功能：
- 

#### 發現的問題：
1. 
2. 
3. 

#### 需要修復的問題：
1. 
2. 
3. 

---

## 🎯 驗證完成標準

### 必須通過的驗證

- [x] 自動化任務測試（後端）- ✅ 通過
- [ ] 前端自動化任務頁面功能
- [ ] 依賴任務選擇器工作正常
- [ ] 通知配置 UI 工作正常
- [ ] 任務執行後通知發送正常
- [ ] 批量創建賬號數量正確
- [ ] 賬號資料信息正確讀取
- [ ] 劇本不丟失
- [ ] 群組監控頁面不再 404
- [ ] API 配置統一，無 CORS 錯誤

---

## 🚀 驗證完成後

1. **記錄驗證結果**
   - 填寫驗證記錄
   - 記錄發現的問題

2. **修復問題**
   - 根據問題優先級修復
   - 重新驗證修復後的功能

3. **準備部署**
   - 確認所有關鍵功能正常
   - 準備部署文檔

---

*驗證指南生成時間：2025年11月26日*

