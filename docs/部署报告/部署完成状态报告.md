# éƒ¨ç½²å®ŒæˆçŠ¶æ€æŠ¥å‘Š

ç”Ÿæˆæ—¶é—´: 2025-01-23

## ðŸ“Š å½“å‰çŠ¶æ€

### éƒ¨ç½²çŠ¶æ€ï¼šâŒ **æœªå®Œæˆ**

## ðŸ” é—®é¢˜åˆ†æž

### ä¸»è¦é—®é¢˜

1. **Query å¯¼å…¥ç¼ºå¤±** âš ï¸
   - é”™è¯¯: `NameError: name 'Query' is not defined`
   - ä½ç½®: `/home/ubuntu/admin-backend/app/main.py` ç¬¬ 296 è¡Œ
   - çŠ¶æ€: å¤šæ¬¡ä¿®å¤å°è¯•å¤±è´¥
   - åŽŸå› : æœåŠ¡å™¨ä¸Šçš„ `main.py` ç¬¬ä¸€è¡Œç¼ºå°‘ `Query` å¯¼å…¥

2. **æœåŠ¡æ— æ³•å¯åŠ¨** âŒ
   - ç”±äºŽ Query é”™è¯¯ï¼ŒæœåŠ¡å¯åŠ¨å¤±è´¥
   - ç«¯å£ 8000 æœªç›‘å¬
   - å¥åº·æ£€æŸ¥å¤±è´¥

### å·²å°è¯•çš„ä¿®å¤æ–¹æ³•

1. âœ… ä½¿ç”¨ `sed` å‘½ä»¤ä¿®å¤ - å¤±è´¥ï¼ˆå‘½ä»¤æœªæ‰§è¡Œï¼‰
2. âœ… ä½¿ç”¨ Python å†…è”è„šæœ¬ä¿®å¤ - å¤±è´¥ï¼ˆPowerShell è½¬ä¹‰é—®é¢˜ï¼‰
3. âœ… ä½¿ç”¨ base64 ä¸Šä¼ è„šæœ¬ - å¤±è´¥ï¼ˆbase64 å‘½ä»¤ä¸å­˜åœ¨ï¼‰
4. â³ ä½¿ç”¨ SCP ç›´æŽ¥ä¸Šä¼ è„šæœ¬ - è¿›è¡Œä¸­

## ðŸŽ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æŽ¨èæ–¹æ¡ˆ

**æ–¹æ¡ˆ 1: ç›´æŽ¥ä¸Šä¼ ä¿®å¤åŽçš„ main.py æ–‡ä»¶**
- ä½¿ç”¨ SCP å°†æœ¬åœ°å·²ä¿®å¤çš„ `main.py` ç›´æŽ¥ä¸Šä¼ åˆ°æœåŠ¡å™¨
- æœ€ç®€å•å¯é çš„æ–¹æ³•

**æ–¹æ¡ˆ 2: æ‰‹åŠ¨ SSH ä¿®å¤**
- ç”¨æˆ·æ‰‹åŠ¨ SSH åˆ°æœåŠ¡å™¨
- æ‰§è¡Œ: `sed -i '1s/from fastapi import FastAPI, Request/from fastapi import FastAPI, Request, Query/' /home/ubuntu/admin-backend/app/main.py`

**æ–¹æ¡ˆ 3: ä½¿ç”¨ä¿®å¤è„šæœ¬**
- ç»§ç»­å°è¯•ä¸Šä¼ å¹¶æ‰§è¡Œ Python ä¿®å¤è„šæœ¬

## ðŸ“ æœåŠ¡å™¨ä¿¡æ¯

### æœåŠ¡å™¨åˆ—è¡¨

1. **æ´›æ‰çŸ¶** (165.154.255.48)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : 8iDcGrYb52Fxpzee
   - çŠ¶æ€: âŒ æœåŠ¡æœªè¿è¡Œ

2. **é©¬å°¼æ‹‰** (165.154.233.179)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : 8iDcGrYb52Fxpzee
   - çŠ¶æ€: âŒ æœåŠ¡æœªè¿è¡Œ

3. **worker-01** (165.154.254.99)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : Along2025!!!
   - çŠ¶æ€: â“ æœªæ£€æŸ¥

## ðŸ”§ ä¿®å¤å‘½ä»¤

å¦‚æžœæ‰‹åŠ¨ä¿®å¤ï¼Œè¯·åœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd /home/ubuntu/admin-backend
sed -i '1s/from fastapi import FastAPI, Request/from fastapi import FastAPI, Request, Query/' app/main.py
head -1 app/main.py  # éªŒè¯
pkill -f uvicorn
cd /home/ubuntu/admin-backend && export PATH=$HOME/.local/bin:$PATH && nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > ../logs/backend.log 2>&1 &
sleep 5
curl http://localhost:8000/health
```

