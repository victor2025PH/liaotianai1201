# éƒ¨ç½²çŠ¶æ€æœ€ç»ˆæŠ¥å‘Š

ç”Ÿæˆæ—¶é—´: 2025-01-23

## ğŸ“Š éƒ¨ç½²çŠ¶æ€

### å½“å‰çŠ¶æ€ï¼šâŒ **æœªå®Œæˆ**

## ğŸ” é—®é¢˜æ€»ç»“

### æ ¸å¿ƒé—®é¢˜

**Query å¯¼å…¥ç¼ºå¤±** - è¿™æ˜¯é˜»æ­¢æœåŠ¡å¯åŠ¨çš„å”¯ä¸€é—®é¢˜
- é”™è¯¯: `NameError: name 'Query' is not defined`
- ä½ç½®: `/home/ubuntu/admin-backend/app/main.py` ç¬¬ 296 è¡Œ
- å½±å“: æœåŠ¡æ— æ³•å¯åŠ¨ï¼Œç«¯å£ 8000 æœªç›‘å¬

### å·²å°è¯•çš„ä¿®å¤æ–¹æ³•

1. âŒ ä½¿ç”¨ `sed` å‘½ä»¤ä¿®å¤ - PowerShell è½¬ä¹‰é—®é¢˜
2. âŒ ä½¿ç”¨ Python å†…è”è„šæœ¬ä¿®å¤ - PowerShell è½¬ä¹‰é—®é¢˜
3. âŒ ä½¿ç”¨ base64 ä¸Šä¼ è„šæœ¬ - base64 å‘½ä»¤ä¸å­˜åœ¨
4. âŒ ä½¿ç”¨ Posh-SSH Set-SCPFile - å‘½ä»¤ä¸å­˜åœ¨
5. â³ ä½¿ç”¨åŸç”Ÿ scp æˆ– SSH sed å‘½ä»¤ - è¿›è¡Œä¸­

## ğŸ¯ æ¨èè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: æ‰‹åŠ¨ SSH ä¿®å¤ï¼ˆæœ€ç®€å•å¯é ï¼‰

è¯·æ‰‹åŠ¨ SSH åˆ°æ¯å°æœåŠ¡å™¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ä¿®å¤ Query å¯¼å…¥
cd /home/ubuntu/admin-backend
sed -i '1s/from fastapi import FastAPI, Request/from fastapi import FastAPI, Request, Query/' app/main.py

# éªŒè¯ä¿®å¤
head -1 app/main.py

# åº”è¯¥è¾“å‡º: from fastapi import FastAPI, Request, Query

# åœæ­¢æ—§æœåŠ¡
pkill -f uvicorn

# å¯åŠ¨æœåŠ¡
cd /home/ubuntu/admin-backend
export PATH=$HOME/.local/bin:$PATH
nohup python3 -m uvicorn app.main:app --host 0.0.0.0 --port 8000 > ../logs/backend.log 2>&1 &

# ç­‰å¾…å‡ ç§’
sleep 5

# éªŒè¯æœåŠ¡
curl http://localhost:8000/health
```

### æ–¹æ¡ˆ 2: ä½¿ç”¨ WinSCP ä¸Šä¼ æ–‡ä»¶

1. ä½¿ç”¨ WinSCP è¿æ¥åˆ°æœåŠ¡å™¨
2. ä¸Šä¼ æœ¬åœ°å·²ä¿®å¤çš„ `admin-backend/app/main.py` æ–‡ä»¶
3. è¦†ç›–æœåŠ¡å™¨ä¸Šçš„ `/home/ubuntu/admin-backend/app/main.py`
4. é‡å¯æœåŠ¡

### æœåŠ¡å™¨ä¿¡æ¯

1. **æ´›æ‰çŸ¶** (165.154.255.48)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : 8iDcGrYb52Fxpzee

2. **é©¬å°¼æ‹‰** (165.154.233.179)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : 8iDcGrYb52Fxpzee

3. **worker-01** (165.154.254.99)
   - ç”¨æˆ·å: ubuntu
   - å¯†ç : Along2025!!!

## ğŸ“ ä¿®å¤åçš„éªŒè¯æ­¥éª¤

1. âœ… æ£€æŸ¥ `main.py` ç¬¬ä¸€è¡ŒåŒ…å« `Query`
2. âœ… æœåŠ¡è¿›ç¨‹è¿è¡Œä¸­
3. âœ… ç«¯å£ 8000 ç›‘å¬ä¸­
4. âœ… å¥åº·æ£€æŸ¥è¿”å› `{"status": "healthy"}`

## âš ï¸ æ³¨æ„äº‹é¡¹

- ä¿®å¤åéœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ
- ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼ˆuvicorn, fastapi ç­‰ï¼‰
- æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ `/home/ubuntu/logs/backend.log` ç¡®è®¤æ— å…¶ä»–é”™è¯¯

