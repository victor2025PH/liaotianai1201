# 今天任務執行指南

> **日期**: 2025-12-01  
> **任務**: 系統完整性檢查 → 清理重複進程 → 核心功能測試

---

## 📋 任務清單

- [ ] **步驟 1**: 系統完整性檢查
- [ ] **步驟 2**: 清理重複進程
- [ ] **步驟 3**: 核心功能測試

---

## 🚀 執行步驟

### 步驟 1: 系統完整性檢查

在服務器終端執行：

```bash
cd ~/liaotian && \
chmod +x deploy/系统完整性检查.sh && \
bash deploy/系统完整性检查.sh
```

**預期時間**: 1-2 分鐘  
**完成標準**: 錯誤數 = 0

---

### 步驟 2: 清理重複進程

在服務器終端執行：

```bash
cd ~/liaotian && \
chmod +x deploy/清理重复进程.sh && \
bash deploy/清理重复进程.sh
```

**預期時間**: 10-15 秒  
**完成標準**: 只有一個 uvicorn 進程運行

---

### 步驟 3: 核心功能測試

參考 `docs/开发笔记/核心功能测试指南.md` 進行測試。

**測試內容**:
1. 多賬號協同邏輯
2. 劇本熱更新
3. 新成員檢測
4. 多輪對話增強

**預期時間**: 30-60 分鐘  
**完成標準**: 所有測試通過

---

## 📊 進度追蹤

### 當前進度

- [x] 創建檢查腳本
- [ ] 執行系統完整性檢查
- [ ] 執行清理重複進程
- [ ] 執行核心功能測試

---

## 🔍 如果遇到問題

### 問題 1: 腳本文件不存在

**解決方案**: 使用直接命令執行（見各步驟的詳細指南）

### 問題 2: 檢查失敗

**解決方案**: 
1. 查看錯誤信息
2. 修復問題
3. 重新執行檢查

### 問題 3: 清理進程失敗

**解決方案**:
1. 手動停止所有進程: `pkill -9 -f 'uvicorn.*app.main:app'`
2. 手動啟動服務: `nohup uvicorn app.main:app --host 0.0.0.0 --port 8000 > /tmp/backend.log 2>&1 &`

---

## ✅ 完成標準

### 步驟 1 完成標準
- ✅ 後端服務正常 (HTTP 200)
- ✅ 數據庫連接正常
- ✅ 關鍵文件存在
- ✅ 錯誤數 = 0

### 步驟 2 完成標準
- ✅ 只有一個 uvicorn 進程運行
- ✅ 服務健康檢查通過
- ✅ 端口 8000 正常監聽

### 步驟 3 完成標準
- ✅ 所有 4 個核心功能測試通過
- ✅ 測試報告生成
- ✅ 無關鍵錯誤

---

**開始執行**: 從步驟 1 開始
