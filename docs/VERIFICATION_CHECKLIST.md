# éƒ¨ç½²é©—è­‰æª¢æŸ¥æ¸…å–®

> **ä½¿ç”¨èªªæ˜**: åœ¨æœå‹™å™¨ä¸ŠåŸ·è¡Œé©—è­‰è…³æœ¬ï¼Œæˆ–æ‰‹å‹•é€é …æª¢æŸ¥

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### åœ¨æœå‹™å™¨ä¸ŠåŸ·è¡Œï¼ˆæ¨è–¦ï¼‰

```bash
# SSH åˆ°æœå‹™å™¨
ssh ubuntu@165.154.233.55

# é€²å…¥é …ç›®ç›®éŒ„
cd /home/ubuntu/telegram-ai-system

# æ‹‰å–æœ€æ–°ä»£ç¢¼ï¼ˆå¦‚æœè…³æœ¬ä¸å­˜åœ¨ï¼‰
git pull origin main

# é‹è¡Œå®Œæ•´é©—è­‰
bash scripts/server/verify_deployment.sh

# é‹è¡Œå®‰å…¨æª¢æŸ¥
bash scripts/server/check_security.sh

# å¿«é€Ÿå¥åº·æª¢æŸ¥
bash scripts/server/quick_health_check.sh
```

---

## ğŸ“‹ è©³ç´°æª¢æŸ¥æ¸…å–®

### âœ… 1. æœå‹™ç‹€æ…‹æª¢æŸ¥

- [ ] **PM2 æœå‹™é‹è¡Œ**
  ```bash
  pm2 status
  # æ‡‰è©²é¡¯ç¤º backend å’Œ frontend éƒ½æ˜¯ online
  ```

- [ ] **ç«¯å£ç›£è½**
  ```bash
  ss -tlnp | grep -E ":8000|:3000"
  # æ‡‰è©²çœ‹åˆ°å…©å€‹ç«¯å£éƒ½åœ¨ç›£è½
  ```

- [ ] **æœå‹™å¥åº·**
  ```bash
  curl http://localhost:8000/health
  # æ‡‰è©²è¿”å› {"status": "ok"}
  ```

### âœ… 2. å®‰å…¨é…ç½®æª¢æŸ¥

- [ ] **JWT_SECRET å·²ä¿®æ”¹**
  ```bash
  cd admin-backend
  grep JWT_SECRET .env
  # ä¸æ‡‰è©²æ˜¯ "change_me"
  ```

- [ ] **ADMIN_DEFAULT_PASSWORD å·²ä¿®æ”¹**
  ```bash
  grep ADMIN_DEFAULT_PASSWORD .env
  # ä¸æ‡‰è©²æ˜¯ "changeme123"
  ```

- [ ] **CORS_ORIGINS å·²é…ç½®**
  ```bash
  grep CORS_ORIGINS .env
  # æ‡‰è©²åŒ…å«ç”Ÿç”¢åŸŸå
  ```

### âœ… 3. åŠŸèƒ½é©—è­‰

- [ ] **ç¶²ç«™å¯è¨ªå•**
  - è¨ªå•: `https://aikz.usdt2026.cc`
  - æ‡‰è©²èƒ½æ­£å¸¸åŠ è¼‰

- [ ] **ç™»éŒ„åŠŸèƒ½**
  - ä½¿ç”¨ç®¡ç†å“¡è³¬è™Ÿç™»éŒ„
  - æ‡‰è©²èƒ½æˆåŠŸç™»éŒ„

- [ ] **API æ–‡æª”**
  - è¨ªå•: `https://aikz.usdt2026.cc/docs`
  - æ‡‰è©²é¡¯ç¤º Swagger UI

- [ ] **å¥åº·æª¢æŸ¥**
  - è¨ªå•: `https://aikz.usdt2026.cc/health?detailed=true`
  - æ‡‰è©²è¿”å›è©³ç´°å¥åº·ä¿¡æ¯

### âœ… 4. æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦

- [ ] **è³¬è™Ÿç®¡ç†**
  - å‰µå»ºè³¬è™Ÿ
  - æŸ¥çœ‹è³¬è™Ÿåˆ—è¡¨
  - æ›´æ–°è³¬è™Ÿä¿¡æ¯

- [ ] **åŠ‡æœ¬ç®¡ç†**
  - å‰µå»ºåŠ‡æœ¬
  - æŸ¥çœ‹åŠ‡æœ¬åˆ—è¡¨
  - ç·¨è¼¯åŠ‡æœ¬

- [ ] **ç›£æ§åŠŸèƒ½**
  - æŸ¥çœ‹å„€è¡¨æ¿
  - æŸ¥çœ‹ç³»çµ±ç›£æ§
  - æŸ¥çœ‹æ—¥èªŒ

### âœ… 5. æ€§èƒ½é©—è­‰

- [ ] **ç·©å­˜å·¥ä½œ**
  ```bash
  curl http://localhost:8000/api/v1/system/performance/cache/stats
  # éœ€è¦èªè­‰ï¼Œä½†æ‡‰è©²èƒ½è¨ªå•
  ```

- [ ] **API éŸ¿æ‡‰æ™‚é–“**
  - ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
  - æª¢æŸ¥ API éŸ¿æ‡‰æ™‚é–“
  - æ‡‰è©² < 500msï¼ˆç·©å­˜å‘½ä¸­æ™‚ < 100msï¼‰

### âœ… 6. æ—¥èªŒæª¢æŸ¥

- [ ] **å¾Œç«¯æ—¥èªŒ**
  ```bash
  pm2 logs backend --lines 50 --nostream
  # æª¢æŸ¥æ˜¯å¦æœ‰éŒ¯èª¤
  ```

- [ ] **å‰ç«¯æ—¥èªŒ**
  ```bash
  pm2 logs frontend --lines 50 --nostream
  # æª¢æŸ¥æ˜¯å¦æœ‰éŒ¯èª¤
  ```

- [ ] **Nginx æ—¥èªŒ**
  ```bash
  sudo tail -n 50 /var/log/nginx/error.log
  # æª¢æŸ¥æ˜¯å¦æœ‰éŒ¯èª¤
  ```

---

## ğŸ”§ å¦‚æœç™¼ç¾å•é¡Œ

### å•é¡Œ 1: æœå‹™æœªé‹è¡Œ

```bash
# é‡å•Ÿæœå‹™
pm2 restart all
pm2 save

# æª¢æŸ¥ç‹€æ…‹
pm2 status
```

### å•é¡Œ 2: 502 Bad Gateway

```bash
# æª¢æŸ¥æœå‹™æ˜¯å¦é‹è¡Œ
pm2 status

# æª¢æŸ¥ç«¯å£
ss -tlnp | grep -E ":8000|:3000"

# æª¢æŸ¥ Nginx
sudo nginx -t
sudo systemctl status nginx
```

### å•é¡Œ 3: å¥åº·æª¢æŸ¥å¤±æ•—

```bash
# æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ
pm2 logs backend --lines 100

# æª¢æŸ¥æ•¸æ“šåº«é€£æ¥
cd admin-backend
source venv/bin/activate
python -c "from app.db import SessionLocal; db = SessionLocal(); print('DB OK')"
```

### å•é¡Œ 4: å®‰å…¨é…ç½®æœªä¿®æ”¹

```bash
# ç·¨è¼¯ç’°å¢ƒè®Šé‡
cd admin-backend
nano .env

# ä¿®æ”¹å¾Œé‡å•Ÿ
pm2 restart backend
```

---

## ğŸ“Š é©—è­‰çµæœè¨˜éŒ„

### æœå‹™ç‹€æ…‹
- [ ] å¾Œç«¯æœå‹™: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] å‰ç«¯æœå‹™: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] Nginx: âœ… æ­£å¸¸ / âŒ ç•°å¸¸

### å®‰å…¨é…ç½®
- [ ] JWT_SECRET: âœ… å·²ä¿®æ”¹ / âŒ æœªä¿®æ”¹
- [ ] ADMIN_PASSWORD: âœ… å·²ä¿®æ”¹ / âŒ æœªä¿®æ”¹
- [ ] CORS_ORIGINS: âœ… å·²é…ç½® / âŒ æœªé…ç½®

### åŠŸèƒ½æ¸¬è©¦
- [ ] ç¶²ç«™è¨ªå•: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] ç™»éŒ„åŠŸèƒ½: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] API æ–‡æª”: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] æ ¸å¿ƒåŠŸèƒ½: âœ… æ­£å¸¸ / âŒ ç•°å¸¸

### æ€§èƒ½
- [ ] ç·©å­˜å·¥ä½œ: âœ… æ­£å¸¸ / âŒ ç•°å¸¸
- [ ] API éŸ¿æ‡‰: âœ… æ­£å¸¸ / âŒ ç•°å¸¸

---

## ğŸ¯ é©—è­‰å®Œæˆæ¨™æº–

æ‰€æœ‰é …ç›®éƒ½æ‡‰è©²æ¨™è¨˜ç‚º âœ…ï¼Œæ‰èƒ½èªç‚ºéƒ¨ç½²é©—è­‰å®Œæˆã€‚

å¦‚æœç™¼ç¾ âŒï¼Œè«‹ï¼š
1. è¨˜éŒ„å•é¡Œè©³æƒ…
2. æŸ¥çœ‹ç›¸é—œæ—¥èªŒ
3. ä¿®å¾©å•é¡Œ
4. é‡æ–°é©—è­‰

---

**æœ€å¾Œæ›´æ–°**: 2025-12-09

