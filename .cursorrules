# Telegram AI System - Development Rules

## Critical Red Lines (Strict Enforcement)

1.  **ROOT DIRECTORY LOCKDOWN**: 
    - **DO NOT** create any new files in the root directory `./` (except updating `README.md`, `.gitignore`, or `requirements.txt`).
    - All new files MUST be placed in their respective subdirectories (`docs/`, `scripts/`, `config/`, etc.).

2.  **ENGLISH NAMING CONVENTION**: 
    - All file names MUST use **English** and **kebab-case**.
    - **NO CHINESE CHARACTERS** in filenames.

3.  **NO TEMP FILES**: 
    - Do not create `temp.py`, `test.txt`, etc. Run code directly or use `tests/`.

---

## STRICT ANTI-BLOAT RULES

1.  **NO DIAGNOSTIC SCRIPTS**: 
    - **FORBIDDEN**: Do not create `check_server.sh`, `verify_deploy.py`.
    - **REASON**: Clutters the codebase.

2.  **NO PROCESS DOCS**: 
    - **FORBIDDEN**: Do not generate `status.md`, `todo.md`, `log.md`.
    - **ACTION**: Keep plans in chat memory.

---

## Terminal & Execution Rules (WINDOWS vs LINUX)

1.  **WINDOWS POWERSHELL COMPATIBILITY (LOCAL ONLY)**:
    - **RESTRICTION**: When executing commands in the user's **LOCAL** terminal (VS Code terminal), **Strictly Avoid** `&&`, `||`, or `;`.
    - **REASON**: PowerShell 5.1 crashes on these.
    - **ACTION**: Execute local commands **sequentially** (one by one).

2.  **LINUX & DEPLOYMENT SCRIPTS (EXCEPTION)**:
    - **CRITICAL EXCEPTION**: When writing code for **Linux Servers** (e.g., `.github/workflows/*.yml`, SSH scripts, or shell scripts), you **MUST USE** `&&` and `||` for standard error handling.
    - **RULE**: Do **NOT** apply Windows restrictions to Linux deployment scripts.
    - **REQUIRED PATTERN**: Use `command && echo success || echo failure` to prevent `set -e` from killing the script on checks.

3.  **SSH & REMOTE COMMAND SAFETY**:
    - **NO COMPLEX SSH COMMANDS**: **Strictly Forbidden** to use `grep`, `awk`, `sed`, `|`, or quotes (`"`, `'`) inside an `ssh` command line argument.
    - **REASON**: Nested quotes cause syntax errors in PowerShell.
    - **ACTION**: Read full content locally, then process in chat memory.

---

## Deployment Workflow (GITHUB ACTIONS ONLY)

1.  **NO DEPLOY SCRIPTS**: No `deploy.sh` or local scripts.
2.  **WORKFLOW**: Modify Code -> `git add .` -> `git commit` -> `git push`.
3.  **NO SSH DEPLOY**: Do not log into server to deploy manually.
4.  **SERVER CONFIGURATION TRUTH (ABSOLUTE)**:
    - **Project Root**: `/opt/luckyred`
    - **Systemd Service**: `luckyred-api`
    - **Virtual Env**: `/opt/luckyred/api/.venv`
    - **RULE**: Always hardcode these paths in workflows. Never guess or detect.

---

## Security

1.  **PROTECT SECRETS**: Never output real keys.

# GIT SAFETY & VERIFICATION RULES

When I ask you to fix code or submit changes:
1. Run `git add .` and `git commit -m "..."` only.
2. **CRITICAL:** Do NOT run `git push`. 
3. After the commit command executes successfully, consider your current task **COMPLETED**.
4. **IMMEDIATELY STOP** processing. Do not continue to verify files. Do not "spin" or wait.
5. Output a short confirmation: "âœ… Commit saved. Please verify code. Type 'push' to upload."