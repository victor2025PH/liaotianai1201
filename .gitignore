# ============================================================================
# .gitignore - Git 忽略规则
# 更新日期: 2025-12-07
# 说明: 此文件定义了不应被 Git 跟踪的文件和目录
# ============================================================================

# ============================================================================
# 1. Python 相关
# ============================================================================
.venv/
venv/
ENV/
env/
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
*.egg
*.egg-info/
dist/
build/
*.whl

# ============================================================================
# 2. 测试和覆盖率
# ============================================================================
.pytest_cache/
.coverage
htmlcov/
.tox/
.nox/
coverage.xml
*.cover
.hypothesis/

# ============================================================================
# 3. IDE 和编辑器
# ============================================================================
.vscode/
.idea/
*.swp
*.swo
*~
.project
.classpath
.settings/
*.sublime-project
*.sublime-workspace

# ============================================================================
# 4. 操作系统文件
# ============================================================================
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
Thumbs.db
desktop.ini
ehthumbs.db

# ============================================================================
# 5. 运行数据和备份
# ============================================================================
backup/
data/*.db
data/*.sqlite
data/*.sqlite3
data/*.xlsx
downloads/
voices/
logs/
*.log

# ============================================================================
# 6. Session 和配置文件（敏感信息）
# ============================================================================
sessions/
*.session
*.session.bak
admin-backend/sessions/

# ============================================================================
# 7. Node.js 相关
# ============================================================================
node_modules/
.npm
.eslintcache
.yarn/
.pnp/
.pnp.js

# ============================================================================
# 8. 构建输出
# ============================================================================
dist/
out/
.next/
build/
*.tsbuildinfo

# ============================================================================
# 9. 环境变量文件
# ============================================================================
.env
.env.local
.env.*.local
.env.development
.env.production
.env.test

# ============================================================================
# 10. 数据库文件
# ============================================================================
*.db
*.sqlite
*.sqlite3
*.xlsx

# ============================================================================
# 11. 临时文件和缓存
# ============================================================================
*.bak
*.tmp
*.temp
*.zip
*.tar.gz
*.cache
tmp/
temp/

# ============================================================================
# 12. 已归档的无用文件目录
# ============================================================================
无用文件/
archive/
wy/
废弃文件/

# ============================================================================
# 13. deploy 目录 - 部署脚本规则
# ============================================================================
# 策略：默认保留所有英文命名的脚本和配置文件，只忽略临时和重复的中文脚本

# 13.1 忽略：临时和重复的中文脚本/文档（项目根目录）
修复*.sh
修复*.md
修复*.bat
修复*.ps1
全自动*.ps1
全自动*.sh
最终*.ps1
最终*.md
持续*.ps1
持续*.py
自动*.ps1
自动*.sh
一键*.bat
一键*.sh
启动*.ps1
启动*.txt
检查*.ps1
查看*.ps1
执行*.md
执行*.txt
诊断*.sh
监控*.ps1
本地*.py

# 13.2 忽略：deploy 目录中的临时中文脚本和文档
deploy/*修复*.sh
deploy/*一键*.sh
deploy/*全自动*.sh
deploy/*最终*.sh
deploy/*修复*.md
deploy/*修复*.py
deploy/*修复*.bat
deploy/*问题*.md
deploy/*诊断*.md
deploy/*总结*.md
deploy/*成功*.md
deploy/*完成*.md
deploy/SSH*.md
deploy/SSH*.txt
deploy/WebSocket*.md
deploy/Nginx*.md
deploy/API*.md
deploy/401*.md
deploy/404*.md
deploy/UPSERT*.md

# 13.3 保留：重要的部署脚本和配置文件（使用 ! 强制包含）
# 英文脚本默认保留，不需要特殊声明
# 但以下中文脚本也需要保留，因为它们可能是重要的：
!deploy/repo_config.sh
!deploy/从GitHub拉取并部署.sh
!deploy/auto_deploy_server.py
!deploy/创建GitHub部署脚本.py
!deploy/docker-compose.yaml
!deploy/k8s/
!deploy/nginx_websocket_config.conf
!deploy/systemd/

# ============================================================================
# 14. docs 目录 - 文档规则
# ============================================================================
# 忽略临时报告，但保留重要文档

# 14.1 忽略：临时部署报告和测试报告
docs/部署报告/*.md
docs/测试报告/*.md

# 14.2 忽略：临时开发笔记（问题、修复、分析、错误相关）
docs/开发笔记/*问题*.md
docs/开发笔记/*修复*.md
docs/开发笔记/*分析*.md
docs/开发笔记/*错误*.md

# 14.3 保留：重要的文档（使用 ! 强制包含）
!docs/开发笔记/CI_CD流程完善完成报告-20251130.md
!docs/开发笔记/仓库拉取问题分析和修复方案.md
!docs/开发笔记/上傳執行總結.md
!docs/开发笔记/执行位置和文件清理指南.md
!docs/开发笔记/仓库问题修复总结.md
!docs/开发笔记/如何查看GitHub Actions*.md
!docs/开发笔记/快速上传到新仓库.md
!docs/开发笔记/上传到新仓库指南.md
!docs/部署流程-完整指南.md

# ============================================================================
# 15. scripts 目录 - 脚本规则
# ============================================================================
# 默认保留所有脚本，只忽略临时脚本

scripts/tmp_*.ps1
scripts/tmp_*.sh
scripts/tmp_*.py

# ============================================================================
# 16. 临时调试和分析文件
# ============================================================================
tmp_*.py
analysis_output.json
project_tree.txt
工程树.txt
tmp_test.wav
*.test.log
*.debug.log

# ============================================================================
# 注意事项：
# 1. 所有英文命名的脚本和文件默认都会被跟踪（除非明确忽略）
# 2. 只忽略临时、重复、或敏感的文件
# 3. 使用 ! 可以强制包含被忽略的文件
# 4. 规则从上到下匹配，后面的规则会覆盖前面的规则
# ============================================================================
