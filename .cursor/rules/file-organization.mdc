---
description: æ–‡ä»¶çµ„ç¹”å’Œè…³æœ¬ç®¡ç†è¦å‰‡
globs:
alwaysApply: true
---

# æ–‡ä»¶çµ„ç¹”å’Œè…³æœ¬ç®¡ç†è¦å‰‡

## ğŸ“ æ–‡ä»¶çµ„ç¹”è¦å‰‡

### 1. è…³æœ¬æ–‡ä»¶ä½ç½®

**ç¦æ­¢åœ¨é …ç›®æ ¹ç›®éŒ„å‰µå»ºè…³æœ¬æ–‡ä»¶ï¼**

æ‰€æœ‰è…³æœ¬æ–‡ä»¶å¿…é ˆæ”¾åœ¨ä»¥ä¸‹æŒ‡å®šç›®éŒ„ï¼š

```
telegram-ai-system/
â”œâ”€â”€ scripts/                    # é …ç›®ç´šè…³æœ¬ï¼ˆæœ¬åœ°å’Œæœå‹™å™¨é€šç”¨ï¼‰
â”‚   â”œâ”€â”€ local/                 # æœ¬åœ°é–‹ç™¼è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ *.bat             # Windows æœ¬åœ°è…³æœ¬
â”‚   â”‚   â””â”€â”€ *.ps1             # PowerShell æœ¬åœ°è…³æœ¬
â”‚   â”œâ”€â”€ server/                # æœå‹™å™¨éƒ¨ç½²è…³æœ¬ï¼ˆå¿…é ˆè‹±æ–‡å‘½åï¼‰
â”‚   â”‚   â”œâ”€â”€ *.sh              # Linux æœå‹™å™¨è…³æœ¬
â”‚   â”‚   â””â”€â”€ *.py              # Python æœå‹™å™¨è…³æœ¬
â”‚   â””â”€â”€ common/                # é€šç”¨è…³æœ¬
â”‚       â””â”€â”€ *.py              # è·¨å¹³å° Python è…³æœ¬
â”‚
â”œâ”€â”€ admin-backend/
â”‚   â”œâ”€â”€ scripts/               # å¾Œç«¯å°ˆç”¨è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ setup/            # è¨­ç½®å’Œé…ç½®è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ test/             # æ¸¬è©¦è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ deploy/           # éƒ¨ç½²è…³æœ¬
â”‚   â”‚   â””â”€â”€ maintenance/      # ç¶­è­·è…³æœ¬
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ saas-demo/
    â””â”€â”€ scripts/              # å‰ç«¯å°ˆç”¨è…³æœ¬
        â”œâ”€â”€ build/            # æ§‹å»ºè…³æœ¬
        â”œâ”€â”€ test/             # æ¸¬è©¦è…³æœ¬
        â””â”€â”€ deploy/           # éƒ¨ç½²è…³æœ¬
```

### 2. æ–‡ä»¶å‘½åè¦å‰‡

#### âš ï¸ é‡è¦ï¼šæ‰€æœ‰è…³æœ¬æ–‡ä»¶åå¿…é ˆä½¿ç”¨è‹±æ–‡ï¼

**ç¦æ­¢ä½¿ç”¨ä¸­æ–‡å‘½åè…³æœ¬æ–‡ä»¶ï¼**

#### æœ¬åœ°è…³æœ¬ï¼ˆWindowsï¼‰
- **å¿…é ˆä½¿ç”¨è‹±æ–‡å‘½å**
- æ ¼å¼ï¼š`åŠŸèƒ½æè¿°.bat` æˆ– `åŠŸèƒ½æè¿°.ps1`
- ä½¿ç”¨å°å¯«å­—æ¯å’Œé€£å­—ç¬¦ï¼ˆkebab-caseï¼‰
- ç¤ºä¾‹ï¼š`start-service.bat`, `run-tests.ps1`, `sync-scripts-to-server.bat`
- âŒ éŒ¯èª¤ç¤ºä¾‹ï¼š`å•Ÿå‹•æœå‹™.bat`, `åŸ·è¡Œæ¸¬è©¦.ps1`, `åŒæ­¥è…³æœ¬åˆ°æœå‹™å™¨.bat`

#### æœå‹™å™¨è…³æœ¬ï¼ˆLinux/Unixï¼‰
- **å¿…é ˆä½¿ç”¨è‹±æ–‡å‘½å**
- æ ¼å¼ï¼š`åŠŸèƒ½æè¿°.sh` æˆ– `åŠŸèƒ½æè¿°.py`
- ä½¿ç”¨å°å¯«å­—æ¯å’Œé€£å­—ç¬¦ï¼ˆkebab-caseï¼‰
- ç¤ºä¾‹ï¼š`start-service.sh`, `run-tests.sh`, `deploy-backend.sh`
- âŒ éŒ¯èª¤ç¤ºä¾‹ï¼š`å•Ÿå‹•æœå‹™.sh`, `åŸ·è¡Œæ¸¬è©¦.sh`

#### é€šç”¨è…³æœ¬ï¼ˆè·¨å¹³å° Pythonï¼‰
- **å¿…é ˆä½¿ç”¨è‹±æ–‡å‘½å**
- æ ¼å¼ï¼š`åŠŸèƒ½æè¿°.py`
- ä½¿ç”¨å°å¯«å­—æ¯å’Œé€£å­—ç¬¦ï¼ˆkebab-caseï¼‰
- ç¤ºä¾‹ï¼š`init-database.py`, `check-health.py`

### 3. åŠŸèƒ½åˆ†é¡

æ‰€æœ‰è…³æœ¬å¿…é ˆæŒ‰åŠŸèƒ½åˆ†é¡åˆ°å°æ‡‰å­ç›®éŒ„ï¼š

- **setup/** - è¨­ç½®å’Œé…ç½®
- **test/** - æ¸¬è©¦ç›¸é—œ
- **deploy/** - éƒ¨ç½²ç›¸é—œ
- **maintenance/** - ç¶­è­·å’Œä¿®å¾©
- **monitor/** - ç›£æ§ç›¸é—œ
- **backup/** - å‚™ä»½ç›¸é—œ

## ğŸ“ æ–‡æª”è¦æ±‚

### å‘½ä»¤èªªæ˜æ ¼å¼

æ‰€æœ‰è…³æœ¬å’Œå‘½ä»¤å¿…é ˆæ˜ç¢ºæ¨™è¨»ï¼š

```markdown
## ğŸ–¥ï¸ é‹è¡Œç’°å¢ƒ

### æœ¬åœ°é‹è¡Œï¼ˆWindowsï¼‰
```bash
# ä¸€éµåŸ·è¡Œ
scripts/local/start-all.bat

# åˆ†æ­¥åŸ·è¡Œ
cd admin-backend
python scripts/setup/init-database.py
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### æœå‹™å™¨é‹è¡Œï¼ˆLinuxï¼‰
```bash
# ä¸€éµåŸ·è¡Œ
bash scripts/server/start-all.sh

# åˆ†æ­¥åŸ·è¡Œ
cd admin-backend
python scripts/setup/init-database.py
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```
```

### å¿…é ˆåŒ…å«çš„å…§å®¹

1. **é‹è¡Œç’°å¢ƒæ¨™è¨»**ï¼šæ˜ç¢ºæ¨™è¨»æœ¬åœ°/æœå‹™å™¨
2. **ä¸€éµåŸ·è¡Œå‘½ä»¤**ï¼šæä¾›æœ€ç°¡å–®çš„åŸ·è¡Œæ–¹å¼
3. **åˆ†æ­¥åŸ·è¡Œå‘½ä»¤**ï¼šæä¾›è©³ç´°çš„åˆ†æ­¥èªªæ˜
4. **å‰ç½®æ¢ä»¶**ï¼šèªªæ˜éœ€è¦æ»¿è¶³çš„æ¢ä»¶
5. **é æœŸçµæœ**ï¼šèªªæ˜åŸ·è¡Œå¾Œæ‡‰è©²çœ‹åˆ°çš„çµæœ

## ğŸš« ç¦æ­¢äº‹é …

1. âŒ åœ¨é …ç›®æ ¹ç›®éŒ„å‰µå»º `.bat`, `.ps1`, `.sh` è…³æœ¬
2. âŒ **æ‰€æœ‰è…³æœ¬ä½¿ç”¨ä¸­æ–‡å‘½åï¼ˆæœ¬åœ°å’Œæœå‹™å™¨éƒ½ç¦æ­¢ï¼‰**
3. âŒ æœå‹™å™¨è…³æœ¬ä½¿ç”¨ä¸­æ–‡å‘½å
4. âŒ è…³æœ¬æ–‡ä»¶ä¸æŒ‰åŠŸèƒ½åˆ†é¡
5. âŒ å‘½ä»¤èªªæ˜ä¸æ¨™è¨»é‹è¡Œç’°å¢ƒ
6. âŒ åªæä¾›ä¸€ç¨®åŸ·è¡Œæ–¹å¼ï¼ˆå¿…é ˆæä¾›ä¸€éµå’Œåˆ†æ­¥å…©ç¨®ï¼‰

## âœ… æ­£ç¢ºç¤ºä¾‹

### æœ¬åœ°è…³æœ¬ï¼ˆWindowsï¼‰
```
scripts/local/start-backend.bat
scripts/local/run-tests.bat
scripts/local/setup-environment.ps1
scripts/local/sync-scripts-to-server.bat
scripts/local/check-and-sync-scripts.ps1
```

### æœå‹™å™¨è…³æœ¬ï¼ˆLinuxï¼‰
```
scripts/server/start-backend.sh
scripts/server/run-tests.sh
scripts/server/deploy-production.sh
```

### é€šç”¨è…³æœ¬ï¼ˆè·¨å¹³å°ï¼‰
```
scripts/common/init-database.py
scripts/common/check-health.py
admin-backend/scripts/setup/init-db.py
```

## ğŸ”„ è…³æœ¬åŒæ­¥è¦å‰‡ï¼ˆå¿…é ˆéµå®ˆï¼‰

### é‡è¦èªªæ˜

**è…³æœ¬åœ¨æœ¬åœ°å‰µå»ºå¾Œï¼Œä¸æœƒè‡ªå‹•åŒæ­¥åˆ°æœå‹™å™¨ï¼**

æ¯æ¬¡å‰µå»ºæˆ–ä¿®æ”¹æœå‹™å™¨è…³æœ¬ï¼ˆ`scripts/server/*.sh` æˆ– `admin-backend/scripts/deploy/*.sh`ï¼‰å¾Œï¼Œ**å¿…é ˆ**æä¾›ä»¥ä¸‹å‘½ä»¤ï¼š

### 1. å¾æœ¬åœ°ä¸Šå‚³åˆ° GitHub

```bash
# åœ¨æœ¬åœ°é …ç›®æ ¹ç›®éŒ„åŸ·è¡Œ
git add scripts/server/
git add admin-backend/scripts/deploy/
git commit -m "Add/Update server scripts: [è…³æœ¬åç¨±]"
git push origin main
```

### 2. åœ¨æœå‹™å™¨ä¸Šä¸‹è¼‰æ›´æ–°

```bash
# åœ¨æœå‹™å™¨é …ç›®æ ¹ç›®éŒ„åŸ·è¡Œ
cd /path/to/telegram-ai-system
git pull origin main
```

### 3. å®Œæ•´åŒæ­¥æµç¨‹ç¤ºä¾‹

**æœ¬åœ°ï¼ˆWindowsï¼‰ï¼š**
```bash
# 1. æ·»åŠ æ–°è…³æœ¬
git add scripts/server/new-script.sh

# 2. æäº¤
git commit -m "Add new server script: new-script.sh"

# 3. æ¨é€åˆ° GitHub
git push origin main
```

**æœå‹™å™¨ï¼ˆLinuxï¼‰ï¼š**
```bash
# 1. é€²å…¥é …ç›®ç›®éŒ„
cd ~/telegram-ai-system

# 2. æ‹‰å–æœ€æ–°ä»£ç¢¼
git pull origin main

# 3. è¨­ç½®åŸ·è¡Œæ¬Šé™ï¼ˆå¦‚æœéœ€è¦ï¼‰
chmod +x scripts/server/new-script.sh

# 4. åŸ·è¡Œè…³æœ¬
bash scripts/server/new-script.sh
```

### 4. AI åŠ©æ‰‹å¿…é ˆéµå®ˆçš„è¦å‰‡

**æ¯æ¬¡å‰µå»ºæˆ–ä¿®æ”¹æœå‹™å™¨è…³æœ¬å¾Œï¼Œå¿…é ˆåœ¨éŸ¿æ‡‰ä¸­æä¾›ï¼š**

1. âœ… **ä¸Šå‚³å‘½ä»¤**ï¼ˆå¾æœ¬åœ°ä¸Šå‚³åˆ° GitHubï¼‰
2. âœ… **ä¸‹è¼‰å‘½ä»¤**ï¼ˆåœ¨æœå‹™å™¨ä¸Šä¸‹è¼‰æ›´æ–°ï¼‰
3. âœ… **åŸ·è¡Œå‘½ä»¤**ï¼ˆåœ¨æœå‹™å™¨ä¸ŠåŸ·è¡Œè…³æœ¬ï¼‰

**æ ¼å¼ï¼š**
```markdown
## ğŸ“¤ åŒæ­¥åˆ°æœå‹™å™¨

### æ­¥é©Ÿ 1: ä¸Šå‚³åˆ° GitHubï¼ˆæœ¬åœ°åŸ·è¡Œï¼‰
```bash
git add scripts/server/[è…³æœ¬åç¨±].sh
git commit -m "Add server script: [è…³æœ¬åç¨±].sh"
git push origin main
```

### æ­¥é©Ÿ 2: åœ¨æœå‹™å™¨ä¸Šä¸‹è¼‰ï¼ˆæœå‹™å™¨åŸ·è¡Œï¼‰
```bash
cd /path/to/telegram-ai-system
git pull origin main
chmod +x scripts/server/[è…³æœ¬åç¨±].sh
```

### æ­¥é©Ÿ 3: åŸ·è¡Œè…³æœ¬ï¼ˆæœå‹™å™¨åŸ·è¡Œï¼‰
```bash
bash scripts/server/[è…³æœ¬åç¨±].sh
```
```

## ğŸ“‹ æª¢æŸ¥æ¸…å–®

å‰µå»ºè…³æœ¬æ™‚å¿…é ˆæª¢æŸ¥ï¼š

- [ ] æ˜¯å¦æ”¾åœ¨æ­£ç¢ºçš„ç›®éŒ„ï¼Ÿ
- [ ] æ˜¯å¦æŒ‰åŠŸèƒ½åˆ†é¡ï¼Ÿ
- [ ] **æ‰€æœ‰è…³æœ¬æ˜¯å¦ä½¿ç”¨è‹±æ–‡å‘½åï¼Ÿ** â­ï¼ˆæœ¬åœ°å’Œæœå‹™å™¨éƒ½å¿…é ˆï¼‰
- [ ] æ–‡æª”æ˜¯å¦æ¨™è¨»é‹è¡Œç’°å¢ƒï¼Ÿ
- [ ] æ˜¯å¦æä¾›ä¸€éµåŸ·è¡Œå‘½ä»¤ï¼Ÿ
- [ ] æ˜¯å¦æä¾›åˆ†æ­¥åŸ·è¡Œå‘½ä»¤ï¼Ÿ
- [ ] **æ˜¯å¦æä¾›äº†ä¸Šå‚³åˆ° GitHub çš„å‘½ä»¤ï¼Ÿ** â­
- [ ] **æ˜¯å¦æä¾›äº†æœå‹™å™¨ä¸‹è¼‰çš„å‘½ä»¤ï¼Ÿ** â­
