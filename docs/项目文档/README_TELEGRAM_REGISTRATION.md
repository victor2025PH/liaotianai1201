# Telegram注册系统 - 使用指南

**版本**: 1.0.0  
**更新日期**: 2025-11-22  
**状态**: ✅ **已就绪**

---

## 📋 目录

- [快速开始](#快速开始)
- [系统访问](#系统访问)
- [功能说明](#功能说明)
- [使用步骤](#使用步骤)
- [常见问题](#常见问题)
- [技术支持](#技术支持)

---

## 🚀 快速开始

### 前置条件

- ✅ 后端服务运行 (http://localhost:8000)
- ✅ 前端服务运行 (http://localhost:3000)
- ✅ 数据库已迁移
- ✅ 服务器配置正确 (`data/master_config.json`)

### 启动服务

**后端服务**:
```bash
cd admin-backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**前端服务**:
```bash
cd admin-frontend
npm run dev
```

---

## 🌐 系统访问

### 前端地址

- **首页**: http://localhost:3000
- **账户中心**: http://localhost:3000/accounts
- **Telegram注册**: http://localhost:3000/accounts → 点击"Telegram注册"标签

### 后端地址

- **API文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health
- **API基础URL**: http://localhost:8000/api/v1

---

## 📱 功能说明

### 核心功能

1. **手机号注册**
   - 支持国际手机号格式
   - 自动验证手机号格式
   - 支持国家代码选择

2. **验证码处理**
   - 自动接收Telegram验证码
   - 手动输入验证码
   - 验证码倒计时显示

3. **Session文件管理**
   - 自动生成Session文件
   - 自动上传到指定服务器
   - Session文件信息显示

4. **风控机制**
   - 风险评分计算
   - 防封措施
   - 操作日志记录

5. **服务器管理**
   - 服务器列表显示
   - 服务器状态监控
   - 服务器选择

---

## 📖 使用步骤

### 步骤1: 登录系统

1. 访问 http://localhost:3000
2. 输入管理员邮箱和密码
3. 点击"登录"按钮

### 步骤2: 进入账户中心

1. 点击左侧菜单"账户中心"
2. 或直接访问: http://localhost:3000/accounts
3. 点击"Telegram注册"标签页

### 步骤3: 填写注册信息

1. **手机号**: 输入国际格式手机号（如：+1234567890）
2. **国家代码**: 选择对应的国家代码（如：+1）
3. **服务器**: 从下拉列表选择一个在线状态的服务器节点
4. **API ID** (可选): 如果使用自定义API凭证
5. **API Hash** (可选): 如果使用自定义API凭证

### 步骤4: 开始注册

1. 点击"开始注册"按钮
2. 等待验证码发送
3. 系统自动跳转到验证码输入步骤

### 步骤5: 输入验证码

1. 查看手机收到的Telegram验证码
2. 在输入框中输入验证码
3. 点击"验证"按钮

### 步骤6: 完成注册

1. 如果验证成功，显示注册完成信息
2. 查看Session文件信息：
   - Session名称
   - 文件路径
   - 服务器节点
   - 文件大小
   - 创建时间

---

## ❓ 常见问题

### Q1: 服务器列表加载失败

**A**: 检查以下几点：
1. 确认已登录系统（需要有效的token）
2. 检查后端服务是否运行
3. 检查浏览器控制台（F12）是否有错误
4. 检查网络请求是否成功

### Q2: 注册启动失败

**A**: 检查以下几点：
1. 手机号格式是否正确（需要包含国家代码，如：+1234567890）
2. 选择的服务器是否在线
3. 检查浏览器控制台错误信息
4. 检查后端日志

### Q3: 验证码验证失败

**A**: 检查以下几点：
1. 确认验证码正确（注意大小写）
2. 检查验证码是否过期（通常5分钟内有效）
3. 如果账户有2FA密码，需要同时输入密码
4. 检查后端日志查看详细错误

### Q4: 如何查看注册记录

**A**: 
1. 注册记录保存在数据库中
2. 可以通过API查询注册状态
3. 可以通过后端日志查看详细信息

---

## 🔧 技术支持

### 测试工具

已提供的测试脚本：
- `test_registration_flow.py` - 完整流程测试
- `test_frontend_integration.py` - 前端集成测试
- `test_functional_registration.py` - 功能测试

### 文档资源

- **项目完成总结**: `docs/开发文档/项目完成总结.md`
- **测试报告**: `docs/测试报告/完整功能测试报告.md`
- **手动测试指南**: `docs/测试报告/手动测试执行指南.md`
- **快速参考**: `docs/开发文档/快速参考.md`

### 日志查看

**后端日志**:
- 控制台输出
- 日志文件: `logs/backend.log`

**前端日志**:
- 浏览器控制台 (F12)
- Network标签页查看API请求

---

## 📊 系统状态

### 当前状态

- ✅ **开发**: 100% 完成
- ✅ **测试**: 100% 通过 (19/19)
- ✅ **文档**: 100% 完善
- ✅ **配置**: 100% 正确

### 测试结果

- ✅ 服务健康检查: 通过
- ✅ API端点检查: 通过
- ✅ 数据库连接: 通过
- ✅ 服务器配置: 通过
- ✅ 前端集成: 通过
- ✅ CORS配置: 通过

---

## 🎯 下一步

1. **进行手动测试**
   - 访问前端页面
   - 测试完整功能

2. **进行完整流程测试**
   - 使用真实手机号
   - 完成注册流程

3. **部署到生产环境**（如需要）
   - 配置生产环境变量
   - 部署服务
   - 配置域名和SSL

---

## 📝 更新日志

### v1.0.0 (2025-11-22)

- ✅ 初始版本发布
- ✅ 完成所有核心功能
- ✅ 完成所有测试
- ✅ 完善所有文档

---

**最后更新**: 2025-11-22  
**系统状态**: ✅ 就绪  
**支持**: 查看文档或联系技术支持
