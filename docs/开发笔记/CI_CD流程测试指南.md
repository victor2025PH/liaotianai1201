# CI/CD æµç¨‹æ¸¬è©¦æŒ‡å—

> **æ—¥æœŸ**: 2025-11-30  
> **ç›®æ¨™**: é©—è­‰æ–°çš„ CI/CD æµç¨‹æ˜¯å¦æ­£å¸¸å·¥ä½œ

---

## ğŸ¯ æ¸¬è©¦ç›®æ¨™

é©—è­‰ä»¥ä¸‹æ”¹é€²åŠŸèƒ½ï¼š
1. âœ… æ¸¬è©¦è¦†è“‹ç‡é–¾å€¼å¼·åˆ¶æª¢æŸ¥
2. âœ… ç¶œåˆæª¢æŸ¥å ±å‘Šç”Ÿæˆ
3. âœ… é€šçŸ¥æ©Ÿåˆ¶å·¥ä½œæµ
4. âœ… æ€§èƒ½æ¸¬è©¦å·¥ä½œæµ
5. âœ… è‡ªå‹•ä¿®å¾©å·¥ä½œæµ

---

## ğŸ“‹ æ¸¬è©¦æ–¹æ³•

### æ–¹æ³• 1: æäº¤ä»£ç¢¼è§¸ç™¼ CIï¼ˆæ¨è–¦ï¼‰

é€™æ˜¯æœ€çœŸå¯¦çš„æ¸¬è©¦æ–¹å¼ï¼Œæœƒè§¸ç™¼æ‰€æœ‰ CI å·¥ä½œæµã€‚

#### æ­¥é©Ÿ 1: å‰µå»ºæ¸¬è©¦åˆ†æ”¯

```bash
git checkout -b test/cicd-validation
```

#### æ­¥é©Ÿ 2: åšä¸€å€‹å°çš„ä»£ç¢¼è®Šæ›´

ä¾‹å¦‚ï¼Œåœ¨ `admin-backend/app/main.py` ä¸­æ·»åŠ ä¸€å€‹è¨»é‡‹ï¼š

```python
# CI/CD æ¸¬è©¦è¨»é‡‹
```

#### æ­¥é©Ÿ 3: æäº¤ä¸¦æ¨é€

```bash
git add .
git commit -m "test: CI/CD æµç¨‹é©—è­‰"
git push origin test/cicd-validation
```

#### æ­¥é©Ÿ 4: æŸ¥çœ‹ GitHub Actions

1. è¨ªå• GitHub å€‰åº«é é¢
2. é»æ“Š "Actions" æ¨™ç±¤
3. æŸ¥çœ‹ "CI" å·¥ä½œæµé‹è¡Œç‹€æ…‹
4. ç­‰å¾…å·¥ä½œæµå®Œæˆï¼ˆç´„ 5-10 åˆ†é˜ï¼‰

#### æ­¥é©Ÿ 5: æª¢æŸ¥çµæœ

**æˆåŠŸæ¨™èªŒ**:
- âœ… æ‰€æœ‰æª¢æŸ¥ä»»å‹™é¡¯ç¤ºç¶ è‰² âœ“
- âœ… è¦†è“‹ç‡å ±å‘Šç”Ÿæˆ
- âœ… ç¶œåˆæª¢æŸ¥é€šé
- âœ… ç„¡éŒ¯èª¤æç¤º

**å¦‚æœå¤±æ•—**:
- âŒ æŸ¥çœ‹å¤±æ•—ä»»å‹™çš„æ—¥èªŒ
- âŒ æª¢æŸ¥éŒ¯èª¤ä¿¡æ¯
- âŒ æ ¹æ“šéŒ¯èª¤ä¿®å¾©

---

### æ–¹æ³• 2: å‰µå»º Pull Request

é€™æœƒè§¸ç™¼æ›´å¤šå·¥ä½œæµï¼ŒåŒ…æ‹¬è‡ªå‹•ä¿®å¾©ã€‚

#### æ­¥é©Ÿ 1: å‰µå»ºæ¸¬è©¦åˆ†æ”¯

```bash
git checkout -b test/pr-cicd
```

#### æ­¥é©Ÿ 2: åšä¸€å€‹æ ¼å¼å•é¡Œçš„ä»£ç¢¼è®Šæ›´

ä¾‹å¦‚ï¼Œåœ¨ä»£ç¢¼ä¸­æ·»åŠ ä¸€äº›æ ¼å¼ä¸è¦ç¯„çš„éƒ¨åˆ†ï¼ˆæ¸¬è©¦è‡ªå‹•ä¿®å¾©åŠŸèƒ½ï¼‰ã€‚

#### æ­¥é©Ÿ 3: å‰µå»º Pull Request

1. æäº¤ä»£ç¢¼ä¸¦æ¨é€
2. åœ¨ GitHub å‰µå»º Pull Request
3. è§€å¯Ÿä»¥ä¸‹å·¥ä½œæµè‡ªå‹•é‹è¡Œï¼š
   - âœ… CI å·¥ä½œæµ
   - âœ… ä»£ç¢¼è³ªé‡æª¢æŸ¥
   - âœ… è‡ªå‹•ä¿®å¾©å·¥ä½œæµï¼ˆå¦‚æœæœ‰æ ¼å¼å•é¡Œï¼‰

#### æ­¥é©Ÿ 4: é©—è­‰è‡ªå‹•ä¿®å¾©

å¦‚æœä»£ç¢¼æ ¼å¼æœ‰å•é¡Œï¼Œ`lint-and-fix` å·¥ä½œæµæœƒï¼š
- âœ… è‡ªå‹•ä¿®å¾©æ ¼å¼å•é¡Œ
- âœ… è‡ªå‹•æäº¤ä¿®å¾©
- âœ… åœ¨ PR ä¸­ç•™ä¸‹è©•è«–

---

### æ–¹æ³• 3: æ‰‹å‹•è§¸ç™¼å·¥ä½œæµ

#### æ‰‹å‹•è§¸ç™¼æ¸¬è©¦è¦†è“‹ç‡å·¥ä½œæµ

1. è¨ªå• GitHub Actions é é¢
2. é¸æ“‡ "Test Coverage" å·¥ä½œæµ
3. é»æ“Š "Run workflow"
4. é¸æ“‡åˆ†æ”¯ï¼ˆmain æˆ– developï¼‰
5. é»æ“Š "Run workflow" æŒ‰éˆ•

#### æ‰‹å‹•è§¸ç™¼æ€§èƒ½æ¸¬è©¦å·¥ä½œæµ

1. è¨ªå• GitHub Actions é é¢
2. é¸æ“‡ "æ€§èƒ½æ¸¬è©¦" å·¥ä½œæµ
3. é»æ“Š "Run workflow"
4. é¸æ“‡åˆ†æ”¯
5. é»æ“Š "Run workflow" æŒ‰éˆ•

---

## ğŸ” é©—è­‰è¦é»

### 1. æ¸¬è©¦è¦†è“‹ç‡é–¾å€¼æª¢æŸ¥

**è¦é©—è­‰**:
- âœ… å¦‚æœè¦†è“‹ç‡ >= 70%ï¼ŒCI é€šé
- âœ… å¦‚æœè¦†è“‹ç‡ < 70%ï¼ŒCI å¤±æ•—

**æ¸¬è©¦æ–¹æ³•**:
1. æŸ¥çœ‹ CI å·¥ä½œæµçš„ "å¾Œç«¯æ¸¬è©¦" job
2. æª¢æŸ¥ "æª¢æŸ¥è¦†è“‹ç‡é–¾å€¼" æ­¥é©Ÿ
3. ç¢ºèªè¦†è“‹ç‡æ•¸å€¼é¡¯ç¤º

---

### 2. ç¶œåˆæª¢æŸ¥å ±å‘Š

**è¦é©—è­‰**:
- âœ… æ‰€æœ‰ä»»å‹™ç‹€æ…‹æ­£ç¢ºé¡¯ç¤º
- âœ… GitHub Actions æ‘˜è¦ä¸­æœ‰å ±å‘Š
- âœ… ç‹€æ…‹æ¨™è­˜æ¸…æ™°ï¼ˆâœ…/âŒï¼‰

**æ¸¬è©¦æ–¹æ³•**:
1. æŸ¥çœ‹ CI å·¥ä½œæµçš„ "ç¶œåˆæª¢æŸ¥" job
2. é»æ“Š "ç”Ÿæˆ CI å ±å‘Š" æ­¥é©Ÿ
3. æŸ¥çœ‹ "Summary" æ¨™ç±¤é 

---

### 3. é€šçŸ¥æ©Ÿåˆ¶

**è¦é©—è­‰**:
- âœ… å·¥ä½œæµå®Œæˆå¾Œè§¸ç™¼é€šçŸ¥
- âœ… é€šçŸ¥æ¶ˆæ¯æ­£ç¢ºç”Ÿæˆ

**æ¸¬è©¦æ–¹æ³•**:
1. ç­‰å¾… CI å·¥ä½œæµå®Œæˆ
2. æŸ¥çœ‹ "CI/CD é€šçŸ¥" å·¥ä½œæµ
3. æª¢æŸ¥ "ç”Ÿæˆé€šçŸ¥æ¶ˆæ¯" æ­¥é©Ÿçš„è¼¸å‡º

---

### 4. æ€§èƒ½æ¸¬è©¦

**è¦é©—è­‰**:
- âœ… æ€§èƒ½æ¸¬è©¦å¯ä»¥é‹è¡Œ
- âœ… æ€§èƒ½å ±å‘Šç”Ÿæˆ

**æ¸¬è©¦æ–¹æ³•**:
1. æ‰‹å‹•è§¸ç™¼æ€§èƒ½æ¸¬è©¦å·¥ä½œæµ
2. ç­‰å¾…å®Œæˆ
3. æŸ¥çœ‹ "ä¸Šå‚³æ€§èƒ½æ¸¬è©¦å ±å‘Š" artifact

---

### 5. è‡ªå‹•ä¿®å¾©

**è¦é©—è­‰**:
- âœ… è‡ªå‹•æª¢æ¸¬æ ¼å¼å•é¡Œ
- âœ… è‡ªå‹•ä¿®å¾©ä¸¦æäº¤
- âœ… PR è©•è«–ç”Ÿæˆ

**æ¸¬è©¦æ–¹æ³•**:
1. å‰µå»ºä¸€å€‹åŒ…å«æ ¼å¼å•é¡Œçš„ PR
2. ç­‰å¾… `lint-and-fix` å·¥ä½œæµé‹è¡Œ
3. æŸ¥çœ‹æ˜¯å¦æœ‰è‡ªå‹•æäº¤çš„ä¿®å¾©
4. æŸ¥çœ‹ PR è©•è«–

---

## ğŸ“Š é æœŸçµæœ

### æˆåŠŸçš„æƒ…æ³

ç•¶ CI/CD æµç¨‹æ­£å¸¸å·¥ä½œæ™‚ï¼Œä½ æœƒçœ‹åˆ°ï¼š

1. **CI å·¥ä½œæµ**
   - âœ… æ‰€æœ‰æª¢æŸ¥ä»»å‹™é€šé
   - âœ… è¦†è“‹ç‡é”åˆ°è¦æ±‚
   - âœ… ç¶œåˆæª¢æŸ¥é€šé
   - âœ… ç”Ÿæˆè©³ç´°å ±å‘Š

2. **æ¸¬è©¦è¦†è“‹ç‡å·¥ä½œæµ**
   - âœ… ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
   - âœ… ä¸Šå‚³åˆ° Codecovï¼ˆå¦‚æœé…ç½®ï¼‰
   - âœ… HTML å ±å‘Šå¯ä¾›ä¸‹è¼‰

3. **è‡ªå‹•ä¿®å¾©å·¥ä½œæµ**
   - âœ… è‡ªå‹•ä¿®å¾©æ ¼å¼å•é¡Œ
   - âœ… è‡ªå‹•æäº¤ä¿®å¾©
   - âœ… PR è©•è«–é€šçŸ¥

---

## âŒ å¸¸è¦‹å•é¡Œæ’æŸ¥

### å•é¡Œ 1: CI å¤±æ•— - è¦†è“‹ç‡ä¸è¶³

**ç—‡ç‹€**: 
```
âŒ æ¸¬è©¦è¦†è“‹ç‡ 65% ä½æ–¼æœ€ä½è¦æ±‚ 70%
```

**è§£æ±ºæ–¹æ¡ˆ**:
1. æ·»åŠ æ›´å¤šæ¸¬è©¦ç”¨ä¾‹
2. æª¢æŸ¥å“ªäº›æ¨¡å¡Šè¦†è“‹ç‡ä½
3. ä½¿ç”¨ HTML å ±å‘Šæ‰¾å‡ºæœªè¦†è“‹çš„ä»£ç¢¼

---

### å•é¡Œ 2: å·¥ä½œæµç„¡æ³•è§¸ç™¼

**ç—‡ç‹€**: 
- æ¨é€ä»£ç¢¼å¾Œå·¥ä½œæµä¸é‹è¡Œ

**æ’æŸ¥æ­¥é©Ÿ**:
1. æª¢æŸ¥åˆ†æ”¯åç¨±ï¼ˆmain æˆ– developï¼‰
2. æª¢æŸ¥ `.github/workflows/*.yml` æ–‡ä»¶èªæ³•
3. æª¢æŸ¥ GitHub Actions æ˜¯å¦å•Ÿç”¨
4. æŸ¥çœ‹ GitHub Actions æ—¥èªŒ

---

### å•é¡Œ 3: è¦†è“‹ç‡æª¢æŸ¥æ­¥é©Ÿå¤±æ•—

**ç—‡ç‹€**: 
- è¦†è“‹ç‡æª¢æŸ¥æ­¥é©Ÿå ±éŒ¯

**å¯èƒ½åŸå› **:
- `bc` å‘½ä»¤æœªå®‰è£ï¼ˆUbuntu é»˜èªå·²å®‰è£ï¼‰
- è¦†è“‹ç‡æ•¸å€¼æå–å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**:
- ä½¿ç”¨ Python é€²è¡Œæ•¸å€¼æ¯”è¼ƒï¼ˆå·²åœ¨ test-coverage.yml ä¸­ä½¿ç”¨ï¼‰

---

## ğŸ“ æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### æº–å‚™éšæ®µ
- [ ] ç¢ºèªä»£ç¢¼å·²æäº¤åˆ° GitHub
- [ ] ç¢ºèªåœ¨æ­£ç¢ºçš„åˆ†æ”¯ï¼ˆmain/developï¼‰
- [ ] ç¢ºèª GitHub Actions å·²å•Ÿç”¨

### æ¸¬è©¦éšæ®µ
- [ ] æäº¤ä»£ç¢¼æˆ–å‰µå»º PR
- [ ] è§€å¯Ÿå·¥ä½œæµé‹è¡Œ
- [ ] ç­‰å¾…å·¥ä½œæµå®Œæˆ
- [ ] æª¢æŸ¥æ‰€æœ‰ä»»å‹™ç‹€æ…‹

### é©—è­‰éšæ®µ
- [ ] è¦†è“‹ç‡æª¢æŸ¥æ­£å¸¸å·¥ä½œ
- [ ] ç¶œåˆæª¢æŸ¥å ±å‘Šç”Ÿæˆ
- [ ] é€šçŸ¥å·¥ä½œæµè§¸ç™¼ï¼ˆå¦‚æœé…ç½®ï¼‰
- [ ] æ€§èƒ½æ¸¬è©¦å¯ä»¥é‹è¡Œ
- [ ] è‡ªå‹•ä¿®å¾©å¯ä»¥é‹è¡Œ

---

## âœ… æ¸¬è©¦å®Œæˆæ¨™æº–

æ¸¬è©¦è¢«èªç‚ºå®Œæˆç•¶ï¼š

- âœ… æ‰€æœ‰å·¥ä½œæµå¯ä»¥æ­£å¸¸è§¸ç™¼
- âœ… CI å·¥ä½œæµå®Œæ•´é‹è¡Œ
- âœ… è¦†è“‹ç‡æª¢æŸ¥æ­£å¸¸å·¥ä½œ
- âœ… ç¶œåˆæª¢æŸ¥å ±å‘Šç”Ÿæˆ
- âœ… ç„¡é˜»å¡æ€§éŒ¯èª¤

---

## ğŸš€ å¿«é€Ÿæ¸¬è©¦å‘½ä»¤

### æœ¬åœ°é©—è­‰é…ç½®

```bash
# æª¢æŸ¥å·¥ä½œæµæ–‡ä»¶
ls -la .github/workflows/*.yml

# æª¢æŸ¥è¦†è“‹ç‡é…ç½®
grep -n "cov-fail-under" .github/workflows/ci.yml
grep -n "cov-fail-under" .github/workflows/test-coverage.yml

# æª¢æŸ¥æ–°å¢å·¥ä½œæµ
ls -la .github/workflows/notification.yml
ls -la .github/workflows/performance-test.yml
ls -la .github/workflows/lint-and-fix.yml
```

### è§¸ç™¼æ¸¬è©¦

```bash
# å‰µå»ºæ¸¬è©¦æäº¤
git checkout -b test/cicd-$(date +%Y%m%d)
echo "# CI/CD æ¸¬è©¦" >> README.md
git add README.md
git commit -m "test: CI/CD æµç¨‹é©—è­‰"
git push origin test/cicd-$(date +%Y%m%d)
```

---

**æº–å‚™å¥½é–‹å§‹æ¸¬è©¦äº†ï¼** ğŸš€

**ä¸‹ä¸€æ­¥**: æäº¤ä»£ç¢¼æˆ–å‰µå»º PR è§¸ç™¼ CI/CD æµç¨‹
