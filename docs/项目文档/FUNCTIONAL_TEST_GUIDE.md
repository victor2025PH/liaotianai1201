# Telegram注册系统 - 功能测试指南

**测试日期**: 2025-11-22  
**系统状态**: ✅ **就绪**

---

## ✅ 自动化测试结果

### 测试通过率: 100% (19/19)

- ✅ **基础功能测试**: 8/8 通过
- ✅ **前端集成测试**: 11/11 通过

### 系统状态确认

- ✅ 后端服务: 正常运行 (http://localhost:8000)
- ✅ 前端服务: 正常运行 (http://localhost:3000)
- ✅ 数据库连接: 正常
- ✅ 服务器配置: 正常（3个服务器节点）
- ✅ CORS配置: 正常
- ✅ API端点: 全部正常

---

## 🚀 开始功能测试

### 步骤1: 访问前端页面

1. **打开浏览器**
   - 推荐使用 Chrome、Firefox 或 Edge
   - 打开开发者工具 (F12)

2. **访问前端地址**
   ```
   http://localhost:3000
   ```

3. **预期结果**
   - ✅ 页面正常加载
   - ✅ 显示登录页面或仪表板（如果已登录）

**检查项**:
- [ ] 页面正常加载
- [ ] 无JavaScript错误（查看Console）
- [ ] 无网络错误（查看Network）

---

### 步骤2: 登录系统

1. **如果未登录**
   - 输入管理员邮箱
   - 输入管理员密码
   - 点击"登录"按钮

2. **预期结果**
   - ✅ 登录成功
   - ✅ 跳转到仪表板页面
   - ✅ 显示用户信息

3. **如果已登录**
   - 直接进入下一步

**检查项**:
- [ ] 登录功能正常
- [ ] 跳转正常
- [ ] 无错误提示

---

### 步骤3: 进入账户中心

**方法1: 通过菜单**
1. 点击左侧菜单"账户中心"
2. 自动跳转到 `/accounts`

**方法2: 直接访问URL**
```
http://localhost:3000/accounts
```

**预期结果**
- ✅ 页面正常显示
- ✅ 显示3个标签页：
  - 账户列表
  - Telegram注册
  - 生成Session

**检查项**:
- [ ] 页面正常显示
- [ ] 标签页正常显示
- [ ] 无错误提示

---

### 步骤4: 切换到Telegram注册标签页

1. **点击"Telegram注册"标签页**

2. **预期结果**
   - ✅ 标签页切换成功
   - ✅ 显示注册表单
   - ✅ 显示步骤指示器（Steps）
   - ✅ 显示表单字段：
     - 手机号输入框
     - 国家代码输入框
     - 服务器选择下拉框
     - API ID输入框（可选）
     - API Hash输入框（可选）

**检查项**:
- [ ] 标签页切换成功
- [ ] 表单正常显示
- [ ] 步骤指示器正常显示
- [ ] 所有字段正常显示

---

### 步骤5: 验证服务器列表加载

**等待时间**: 页面加载后几秒内

**预期结果**:
- ✅ 服务器列表自动加载
- ✅ 显示服务器节点ID（如：worker-01, los-angeles, manila）
- ✅ 显示服务器状态（在线/离线）
- ✅ 显示服务器账户数量（如：0/5）

**检查项**:
- [ ] 服务器列表自动加载
- [ ] 显示3个服务器节点
- [ ] 服务器状态正确显示
- [ ] 服务器信息完整

**如果失败**:
- 检查浏览器控制台（F12）是否有错误
- 检查Network标签页，查看API请求
- 确认已登录（检查localStorage中的access_token）

---

### 步骤6: 测试表单验证 - 必填字段

1. **不填写任何字段，直接点击"开始注册"按钮**

2. **预期结果**
   - ✅ 显示验证错误提示
   - ✅ 手机号字段显示红色边框和错误信息
   - ✅ 国家代码字段显示红色边框和错误信息
   - ✅ 服务器字段显示红色边框和错误信息

**检查项**:
- [ ] 验证错误正常显示
- [ ] 错误提示清晰
- [ ] 字段高亮显示

---

### 步骤7: 测试表单验证 - 手机号格式

1. **输入无效手机号**
   - 例如: `123` 或 `abc` 或 `1234567890`（不带+号）

2. **预期结果**
   - ✅ 显示格式错误提示
   - ✅ 提示正确的手机号格式（如：+1234567890）

**检查项**:
- [ ] 格式验证正常
- [ ] 错误提示清晰

---

### 步骤8: 测试正常输入

1. **填写有效信息**
   - 手机号: `+1234567890` (使用真实手机号)
   - 国家代码: `+1` (根据手机号选择)
   - 服务器: 从下拉列表选择一个在线状态的服务器节点

2. **预期结果**
   - ✅ 表单验证通过
   - ✅ 所有字段显示正常（无红色边框）
   - ✅ "开始注册"按钮可以点击

**检查项**:
- [ ] 表单验证通过
- [ ] 按钮可点击
- [ ] 无错误提示

---

### 步骤9: 测试注册启动功能

**⚠️ 注意**: 此步骤需要真实手机号，将发送真实的Telegram验证码

1. **填写完整信息**
   - 手机号: `+1234567890` (使用真实手机号)
   - 国家代码: `+1` (根据手机号选择)
   - 服务器: 选择一个在线状态的服务器节点

2. **点击"开始注册"按钮**

3. **预期结果**
   - ✅ 显示加载状态（按钮显示loading）
   - ✅ 跳转到步骤2（验证码输入）
   - ✅ 步骤指示器更新到步骤2
   - ✅ 显示验证码输入框
   - ✅ 显示倒计时（如果有）
   - ✅ 显示风险评分（如果有）
   - ✅ 显示成功消息："验证码已发送，请查收"

**检查项**:
- [ ] 注册启动成功
- [ ] 跳转到验证码输入步骤
- [ ] 显示倒计时
- [ ] 显示风险评分
- [ ] 收到Telegram验证码

**如果失败**:
- 检查浏览器控制台错误
- 检查Network标签页，查看API请求和响应
- 检查后端日志

---

### 步骤10: 测试验证码输入功能

1. **查看手机收到的Telegram验证码**
   - 验证码通常在5分钟内有效
   - 验证码格式通常是5位数字

2. **在输入框中输入验证码**

3. **点击"验证"按钮**

4. **预期结果**
   - ✅ 显示加载状态
   - ✅ 如果验证成功: 跳转到步骤3（完成）
   - ✅ 如果验证失败: 显示错误提示

**检查项**:
- [ ] 验证码输入正常
- [ ] 验证功能正常
- [ ] 错误提示清晰（如果失败）

**如果失败**:
- 确认验证码正确（注意大小写）
- 检查验证码是否过期
- 如果账户有2FA密码，需要同时输入密码

---

### 步骤11: 测试注册完成功能

**前提**: 验证码验证成功

1. **检查完成状态**

2. **预期结果**
   - ✅ 步骤指示器更新到步骤3
   - ✅ 显示成功信息
   - ✅ 显示Session文件信息：
     - Session名称
     - 文件路径
     - 服务器节点
     - 文件大小
     - 创建时间

**检查项**:
- [ ] 注册完成
- [ ] Session文件信息显示
- [ ] 信息完整准确

---

### 步骤12: 测试错误处理

#### 12.1 测试验证码错误

1. **输入错误的验证码**（如：`00000`）
2. **点击"验证"按钮**

**预期结果**:
- ✅ 显示验证失败提示
- ✅ 错误信息清晰
- ✅ 允许重新输入验证码

#### 12.2 测试服务器离线（如果有）

1. **选择离线状态的服务器**（如果有）
2. **尝试启动注册**

**预期结果**:
- ✅ 显示服务器离线提示
- ✅ 阻止注册启动
- ✅ 建议选择在线服务器

---

## 🔍 浏览器控制台检查

### Console标签页

**检查项**:
- [ ] 无JavaScript错误
- [ ] 无网络请求错误
- [ ] 无API调用错误

**如果发现错误**:
- 记录错误信息
- 截图保存
- 检查错误原因

### Network标签页

**检查API请求**:

1. **服务器列表API** (`/api/v1/group-ai/servers`)
   - 状态码: 200
   - 响应时间: < 2秒
   - 响应数据: 包含服务器列表

2. **注册启动API** (`/api/v1/telegram-registration/start`)
   - 状态码: 200
   - 响应时间: < 30秒
   - 响应数据: 包含registration_id

3. **验证码验证API** (`/api/v1/telegram-registration/verify`)
   - 状态码: 200
   - 响应时间: < 30秒
   - 响应数据: 包含session_file信息

---

## 📊 测试结果记录

### 测试通过率

- **通过**: ___/13
- **失败**: ___/13
- **未测试**: ___/13

### 测试分类

- **页面加载测试**: ___/3
- **功能测试**: ___/7
- **错误处理测试**: ___/3

---

## 🐛 问题记录

### 问题1: [问题描述]

**严重程度**: [高/中/低]

**复现步骤**:
1. 
2. 
3. 

**预期结果**: 

**实际结果**: 

**截图**: [如有]

---

## ✅ 测试完成确认

### 测试完成标准

- [ ] 所有页面加载测试通过
- [ ] 所有功能测试通过
- [ ] 所有错误处理测试通过
- [ ] 无JavaScript错误
- [ ] 无网络请求错误
- [ ] 用户体验良好

---

## 📚 相关文档

- **测试执行记录**: `docs/测试报告/功能测试执行记录.md`
- **手动测试指南**: `docs/测试报告/手动测试执行指南.md`
- **完整测试报告**: `docs/测试报告/完整功能测试报告.md`

---

**测试指南创建日期**: 2025-11-22  
**系统状态**: ✅ 就绪  
**下一步**: 开始功能测试

