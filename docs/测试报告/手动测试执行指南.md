# Telegram注册系统 - 手动测试执行指南

**测试日期**: 2025-11-22  
**测试状态**: ✅ **准备就绪**

---

## 📋 测试前准备

### 确认服务运行

- ✅ 后端服务: http://localhost:8000
- ✅ 前端服务: http://localhost:3000
- ✅ 数据库: 正常
- ✅ 服务器配置: 正常

### 准备测试账号

- 管理员邮箱和密码（用于登录）
- 真实手机号（用于注册测试，需要能接收Telegram验证码）

---

## 🚀 测试步骤

### 步骤1: 访问前端页面

1. **打开浏览器**
   - 推荐使用 Chrome、Firefox 或 Edge
   - 打开开发者工具 (F12)

2. **访问前端地址**
   ```
   http://localhost:3000
   ```

3. **预期结果**
   - ✅ 页面正常加载
   - ✅ 显示登录页面或仪表板（如果已登录）

---

### 步骤2: 登录系统

1. **如果未登录**
   - 输入管理员邮箱
   - 输入管理员密码
   - 点击"登录"按钮

2. **预期结果**
   - ✅ 登录成功
   - ✅ 跳转到仪表板页面
   - ✅ 显示用户信息

3. **如果已登录**
   - 直接进入下一步

---

### 步骤3: 进入账户中心

**方法1: 通过菜单**
1. 点击左侧菜单"账户中心"
2. 自动跳转到 `/accounts`

**方法2: 直接访问URL**
```
http://localhost:3000/accounts
```

**预期结果**
- ✅ 页面正常显示
- ✅ 显示3个标签页：
  - 账户列表
  - Telegram注册
  - 生成Session

---

### 步骤4: 测试Telegram注册功能

#### 4.1 切换到Telegram注册标签页

1. **点击"Telegram注册"标签页**

2. **预期结果**
   - ✅ 标签页切换成功
   - ✅ 显示注册表单
   - ✅ 显示步骤指示器（Steps）
   - ✅ 显示表单字段：
     - 手机号输入框
     - 国家代码输入框
     - 服务器选择下拉框
     - API ID输入框（可选）
     - API Hash输入框（可选）

#### 4.2 验证服务器列表加载

**检查项**:
- [ ] 服务器列表自动加载（页面加载后几秒内）
- [ ] 显示服务器节点ID（如：worker-01, los-angeles, manila）
- [ ] 显示服务器状态（在线/离线）
- [ ] 显示服务器账户数量（如：0/5）

**预期结果**:
- ✅ 服务器列表正常加载
- ✅ 显示3个服务器节点
- ✅ 服务器状态正确显示

**如果失败**:
- 检查浏览器控制台（F12）是否有错误
- 检查Network标签页，查看API请求是否成功
- 确认已登录（需要有效的token）

---

### 步骤5: 测试表单验证

#### 5.1 测试必填字段验证

1. **不填写任何字段，直接点击"开始注册"按钮**

2. **预期结果**
   - ✅ 显示验证错误提示
   - ✅ 手机号字段显示红色边框和错误信息
   - ✅ 国家代码字段显示红色边框和错误信息
   - ✅ 服务器字段显示红色边框和错误信息

#### 5.2 测试手机号格式验证

1. **输入无效手机号**
   - 例如: `123` 或 `abc` 或 `1234567890`（不带+号）

2. **预期结果**
   - ✅ 显示格式错误提示
   - ✅ 提示正确的手机号格式（如：+1234567890）

#### 5.3 测试正常输入

1. **填写有效信息**
   - 手机号: `+1234567890` (使用真实手机号)
   - 国家代码: `+1` (根据手机号选择)
   - 服务器: 从下拉列表选择一个服务器节点（选择在线状态的服务器）

2. **预期结果**
   - ✅ 表单验证通过
   - ✅ 所有字段显示正常（无红色边框）
   - ✅ "开始注册"按钮可以点击

---

### 步骤6: 测试注册启动功能

#### 6.1 启动注册

1. **填写完整信息**
   - 手机号: `+1234567890` (使用真实手机号)
   - 国家代码: `+1` (根据手机号选择)
   - 服务器: 选择一个在线状态的服务器节点

2. **点击"开始注册"按钮**

3. **预期结果**
   - ✅ 显示加载状态（按钮显示loading）
   - ✅ 跳转到步骤2（验证码输入）
   - ✅ 步骤指示器更新到步骤2
   - ✅ 显示验证码输入框
   - ✅ 显示倒计时（如果有）
   - ✅ 显示风险评分（如果有）
   - ✅ 显示注册ID（在控制台或页面中）

#### 6.2 验证状态显示

**检查项**:
- [ ] 步骤指示器更新到步骤2
- [ ] 显示验证码输入框
- [ ] 显示"验证"按钮
- [ ] 显示倒计时（如果有）
- [ ] 显示风险评分（如果有）
- [ ] 显示错误提示（如果有）

**如果失败**:
- 检查浏览器控制台（F12）是否有错误
- 检查Network标签页，查看API请求和响应
- 查看后端日志

---

### 步骤7: 测试验证码输入功能

#### 7.1 输入验证码

1. **查看手机收到的Telegram验证码**
   - 验证码通常在5分钟内有效
   - 验证码格式通常是5位数字

2. **在输入框中输入验证码**

3. **点击"验证"按钮**

4. **预期结果**
   - ✅ 显示加载状态
   - ✅ 如果验证成功: 跳转到步骤3（完成）
   - ✅ 如果验证失败: 显示错误提示

#### 7.2 验证完成状态

**如果验证成功**:
- ✅ 步骤指示器更新到步骤3
- ✅ 显示成功信息
- ✅ 显示Session文件信息：
  - Session名称
  - 文件路径
  - 服务器节点
  - 文件大小
  - 创建时间

**如果验证失败**:
- ✅ 显示错误提示
- ✅ 允许重新输入验证码
- ✅ 如果验证码过期，可以重新启动注册

---

### 步骤8: 测试错误处理

#### 8.1 测试网络错误

1. **停止后端服务**（可选，用于测试）
2. **尝试启动注册**
3. **预期结果**
   - ✅ 显示网络错误提示
   - ✅ 错误信息清晰易懂
   - ✅ 允许重试

#### 8.2 测试验证码错误

1. **输入错误的验证码**
   - 例如: `00000` 或 `12345`

2. **点击"验证"按钮**

3. **预期结果**
   - ✅ 显示验证失败提示
   - ✅ 错误信息清晰
   - ✅ 允许重新输入验证码

#### 8.3 测试服务器离线

1. **选择离线状态的服务器**（如果有）
2. **尝试启动注册**
3. **预期结果**
   - ✅ 显示服务器离线提示
   - ✅ 阻止注册启动
   - ✅ 建议选择在线服务器

---

## 📊 测试检查清单

### 页面加载测试

- [ ] 前端页面可访问
- [ ] 登录功能正常
- [ ] 账户中心页面正常
- [ ] Telegram注册标签页正常显示

### 功能测试

- [ ] 服务器列表正常加载
- [ ] 表单字段正常显示
- [ ] 手机号格式验证
- [ ] 必填字段验证
- [ ] 开始注册功能
- [ ] 验证码输入功能
- [ ] 倒计时显示（如果有）
- [ ] 风险评分显示（如果有）
- [ ] 错误处理正常
- [ ] 完成注册功能
- [ ] Session文件信息显示

### UI/UX测试

- [ ] 页面布局正常
- [ ] 按钮样式正常
- [ ] 表单样式正常
- [ ] 步骤指示器正常
- [ ] 加载状态正常
- [ ] 错误提示清晰
- [ ] 响应式设计正常（可选）

---

## 🔍 浏览器控制台检查

### 检查错误

1. **打开开发者工具** (F12)
2. **查看Console标签页**
3. **检查是否有错误**

**预期结果**:
- ✅ 无JavaScript错误
- ✅ 无网络请求错误
- ✅ 无API调用错误

### 检查网络请求

1. **查看Network标签页**
2. **检查API请求**

**检查项**:
- [ ] 服务器列表API请求成功（`/api/v1/group-ai/servers`）
- [ ] 注册启动API请求成功（`/api/v1/telegram-registration/start`）
- [ ] 验证码验证API请求成功（`/api/v1/telegram-registration/verify`）
- [ ] 状态查询API请求成功（`/api/v1/telegram-registration/status/{id}`）

**请求检查**:
- 状态码: 200（成功）或 401（需要认证）
- 响应格式: JSON
- 响应时间: 合理（< 5秒）

---

## 📝 测试记录模板

### 测试环境

- **测试日期**: YYYY-MM-DD
- **测试人员**: [姓名]
- **浏览器**: [Chrome/Firefox/Edge]
- **浏览器版本**: [版本号]
- **后端版本**: [版本号]
- **前端版本**: [版本号]

### 测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 前端页面访问 | ✅/❌ | |
| 登录功能 | ✅/❌ | |
| 账户中心页面 | ✅/❌ | |
| 服务器列表加载 | ✅/❌ | |
| 表单验证 | ✅/❌ | |
| 注册启动 | ✅/❌ | |
| 验证码输入 | ✅/❌ | |
| 注册完成 | ✅/❌ | |
| 错误处理 | ✅/❌ | |

### 发现的问题

1. [问题描述]
   - 复现步骤:
   - 预期结果:
   - 实际结果:
   - 严重程度: [高/中/低]
   - 截图: [如有]

---

## 🐛 常见问题排查

### 问题1: 服务器列表加载失败

**症状**: 显示"加载服务器列表失败"

**排查步骤**:
1. 检查浏览器控制台（F12）是否有错误
2. 检查Network标签页，查看API请求
3. 确认已登录（检查localStorage中的access_token）
4. 检查后端服务是否运行
5. 检查后端日志

**解决方案**:
- 重新登录
- 检查后端服务状态
- 检查网络连接

### 问题2: 注册启动失败

**症状**: 点击"开始注册"后显示错误

**排查步骤**:
1. 检查手机号格式是否正确（需要包含国家代码，如：+1234567890）
2. 检查服务器节点是否在线
3. 检查浏览器控制台错误信息
4. 检查Network标签页，查看API请求和响应
5. 检查后端日志

**解决方案**:
- 使用正确的手机号格式
- 选择在线状态的服务器
- 检查后端日志查看详细错误

### 问题3: 验证码验证失败

**症状**: 输入验证码后显示错误

**排查步骤**:
1. 确认验证码正确（注意大小写，通常是数字）
2. 检查验证码是否过期（通常5分钟内有效）
3. 检查浏览器控制台错误信息
4. 检查Network标签页，查看API请求和响应
5. 检查后端日志

**解决方案**:
- 重新获取验证码（重新启动注册）
- 确认验证码正确输入
- 检查后端日志查看详细错误

---

## ✅ 测试完成标准

- [x] 所有页面正常加载
- [ ] 所有功能正常运作
- [ ] 所有验证正常
- [ ] 所有错误处理正常
- [ ] 用户体验良好
- [ ] 无JavaScript错误
- [ ] 无网络请求错误

---

## 🚀 开始测试

**立即开始手动测试**:

1. 访问: http://localhost:3000/accounts
2. 登录系统
3. 点击"Telegram注册"标签页
4. 按照上述步骤进行测试

---

**测试指南创建日期**: 2025-11-22  
**状态**: ✅ 就绪  
**下一步**: 开始手动测试

