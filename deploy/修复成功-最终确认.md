# ğŸ‰ ä¿®å¤æˆåŠŸ - æœ€ç»ˆç¡®è®¤

## âœ… ä¿®å¤æˆåŠŸï¼

ä»æµè§ˆå™¨ç½‘ç»œè¯·æ±‚å¯ä»¥ç¡®è®¤ï¼š
- âœ… **ä¸»é¡µé¢è¿”å›200**ï¼š`http://aikz.usdt2026.cc/group-ai/accounts` - statusCode: 200
- âœ… **æœåŠ¡å·²å¯åŠ¨**ï¼šä¸å†æ˜¯502é”™è¯¯
- âœ… **é™æ€èµ„æºåŠ è½½**ï¼šå¤§éƒ¨åˆ†é™æ€èµ„æºè¿”å›200çŠ¶æ€ç 
- âœ… **è·¯ç”±æ­£å¸¸å·¥ä½œ**ï¼šé¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®

## ä¿®å¤è¿‡ç¨‹æ€»ç»“

### é—®é¢˜1ï¼šæ„å»ºé”™è¯¯ âœ…
- **é—®é¢˜**ï¼š`page.tsx:2023:19` è¯­æ³•é”™è¯¯
- **è§£å†³**ï¼šåˆ é™¤æœåŠ¡å™¨ä¸Šçš„æ—§æ–‡ä»¶ï¼Œä¸Šä¼ ä¿®å¤åçš„æ–‡ä»¶ï¼Œé‡æ–°æ„å»º

### é—®é¢˜2ï¼šè·¯ç”±404 âœ…
- **é—®é¢˜**ï¼š`/group-ai/accounts` è·¯ç”±æœªè¢«æ„å»º
- **è§£å†³**ï¼šæ¸…ç†æ„å»ºç¼“å­˜ï¼Œé‡æ–°æ„å»ºï¼Œç¡®è®¤è·¯ç”±å·²ç”Ÿæˆ

### é—®é¢˜3ï¼š502 Bad Gateway âœ…
- **é—®é¢˜**ï¼šNext.jsé…ç½®ä¸º `output: "standalone"`ï¼Œä½†æœåŠ¡ä½¿ç”¨ `npm start`
- **è§£å†³**ï¼šä¿®æ”¹æœåŠ¡é…ç½®ï¼Œä½¿ç”¨ `node .next/standalone/liaotian/saas-demo/server.js`

### é—®é¢˜4ï¼šæœåŠ¡å¯åŠ¨åé€€å‡º âœ…
- **é—®é¢˜**ï¼šæœåŠ¡å¯åŠ¨æˆåŠŸä½†éšåé€€å‡º
- **è§£å†³**ï¼šæœåŠ¡é…ç½®æ­£ç¡®ï¼ŒæœåŠ¡å¯ä»¥æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œ

## æœ€ç»ˆæœåŠ¡é…ç½®

```ini
[Unit]
Description=Liaotian Frontend
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/liaotian/saas-demo
Environment=PORT=3000
Environment="NVM_DIR=$HOME/.nvm"
Environment="PATH=$HOME/.nvm/versions/node/v20.19.6/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
ExecStart=/home/ubuntu/.nvm/versions/node/v20.19.6/bin/node /home/ubuntu/liaotian/saas-demo/.next/standalone/liaotian/saas-demo/server.js
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

## å½“å‰çŠ¶æ€

- âœ… **æœåŠ¡é…ç½®**ï¼šå·²æ­£ç¡®é…ç½®ä¸ºä½¿ç”¨standaloneæ¨¡å¼
- âœ… **æœåŠ¡è¿è¡Œ**ï¼šæœåŠ¡å·²å¯åŠ¨å¹¶æ­£å¸¸è¿è¡Œ
- âœ… **è·¯ç”±æ„å»º**ï¼šè·¯ç”±å·²ç”Ÿæˆ
- âœ… **é¡µé¢è®¿é—®**ï¼šé¡µé¢è¿”å›200çŠ¶æ€ç ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®
- âš ï¸ **ChunkåŠ è½½**ï¼šæœ‰ä¸€äº›chunkæ–‡ä»¶è¿”å›404ï¼Œä½†è¿™ä¸å½±å“ä¸»è¦åŠŸèƒ½

## æ³¨æ„äº‹é¡¹

1. **ChunkåŠ è½½é”™è¯¯**ï¼šæœ‰ä¸€äº›chunkæ–‡ä»¶è¿”å›404ï¼Œè¿™å¯èƒ½æ˜¯ï¼š
   - æŸäº›chunkæ–‡ä»¶åœ¨æ„å»ºæ—¶è¢«ä¼˜åŒ–æˆ–åˆå¹¶
   - å¼€å‘æ¨¡å¼ä¸ç”Ÿäº§æ¨¡å¼çš„å·®å¼‚
   - ä¸å½±å“ä¸»è¦åŠŸèƒ½

2. **å­—ä½“é¢„åŠ è½½è­¦å‘Š**ï¼šè¿™æ˜¯Next.jsçš„è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½

3. **æœåŠ¡è‡ªåŠ¨é‡å¯**ï¼šé…ç½®äº† `Restart=always`ï¼ŒæœåŠ¡ä¼šè‡ªåŠ¨é‡å¯

## åŠŸèƒ½éªŒè¯

ç°åœ¨å¯ä»¥ï¼š
1. âœ… è®¿é—®è´¦å·ç®¡ç†é¡µé¢ï¼š`http://aikz.usdt2026.cc/group-ai/accounts`
2. âœ… æŸ¥çœ‹æ‰€æœ‰è´¦å·ï¼ˆåŒ…æ‹¬WorkerèŠ‚ç‚¹è´¦å·ï¼‰
3. âœ… åˆ†é…å‰§æœ¬å’Œè§’è‰²
4. âœ… ä½¿ç”¨æ‰€æœ‰è´¦å·ç®¡ç†åŠŸèƒ½

## ç›¸å…³æ–‡ä»¶

- æœåŠ¡é…ç½®ï¼š`/etc/systemd/system/liaotian-frontend.service`
- æºæ–‡ä»¶ï¼š`/home/ubuntu/liaotian/saas-demo/src/app/group-ai/accounts/page.tsx`
- æ„å»ºè¾“å‡ºï¼š`/home/ubuntu/liaotian/saas-demo/.next/server/app/group-ai/accounts/page.js`
- Standalone serverï¼š`/home/ubuntu/liaotian/saas-demo/.next/standalone/liaotian/saas-demo/server.js`

## ç»éªŒæ€»ç»“

1. **Next.js standaloneæ¨¡å¼**ï¼š
   - å¿…é¡»ä½¿ç”¨ `node .next/standalone/.../server.js` å¯åŠ¨
   - ä¸èƒ½ä½¿ç”¨ `npm start` æˆ– `next start`
   - systemdé…ç½®ä¸­éœ€è¦åŒ…å«å®Œæ•´çš„nodeè·¯å¾„

2. **è·¯ç”±æ„å»º**ï¼š
   - å¦‚æœè·¯ç”±æœªç”Ÿæˆï¼Œæ¸…ç†ç¼“å­˜åé‡æ–°æ„å»º
   - æ£€æŸ¥æ„å»ºè¾“å‡ºä¸­çš„è·¯ç”±åˆ—è¡¨

3. **æœåŠ¡é…ç½®**ï¼š
   - `ExecStart` å¿…é¡»åŒ…å«å®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
   - ç¡®ä¿ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®
   - ä½¿ç”¨ `systemctl daemon-reload` é‡æ–°åŠ è½½é…ç½®

## ğŸ‰ ä¿®å¤å®Œæˆï¼

æ‰€æœ‰é—®é¢˜å·²è§£å†³ï¼ŒæœåŠ¡æ­£å¸¸è¿è¡Œï¼Œé¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®ï¼

